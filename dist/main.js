(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){let r=0,n=0;return{name:e,hit:()=>{++n,n===t&&++r},length:t,showHits:()=>n,isSunk:()=>r}}function r(e){const r={a1:"",a2:"",a3:"",a4:"",a5:"",a6:"",a7:"",a8:"",b1:"",b2:"",b3:"",b4:"",b5:"",b6:"",b7:"",b8:"",c1:"",c2:"",c3:"",c4:"",c5:"",c6:"",c7:"",c8:"",d1:"",d2:"",d3:"",d4:"",d5:"",d6:"",d7:"",d8:"",e1:"",e2:"",e3:"",e4:"",e5:"",e6:"",e7:"",e8:"",f1:"",f2:"",f3:"",f4:"",f5:"",f6:"",f7:"",f8:"",g1:"",g2:"",g3:"",g4:"",g5:"",g6:"",g7:"",g8:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:"",h7:"",h8:""},n=[];return{coordinates:r,placeCarrier:(e,l)=>{const a=t("carrier",5);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="carrier";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="carrier"}n.push(a)}},placeBattleship:(e,l)=>{const a=t("battleship",4);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="battleship";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="battleship"}n.push(a)}},placeCruiser:(e,l)=>{const a=t("cruiser",3);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="cruiser";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="cruiser"}n.push(a)}},placeSubmarine:(e,l)=>{const a=t("submarine",3);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="submarine";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="submarine"}n.push(a)}},placeDestroyer:(e,l)=>{const a=t("destroyer",2);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="destroyer";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="destroyer"}n.push(a)}},receiveAttack:e=>r[e]?((e=>{switch(e){case"carrier":n[0].hit();break;case"battleship":n[1].hit();break;case"cruiser":n[2].hit();break;case"submarine":n[3].hit();break;case"destroyer":n[4].hit()}})(r[e]),!0):(r[e]="miss",!1),checkAllShipsSunk:()=>{if(5===n.reduce(((e,t)=>e+t.isSunk()),0))return!0},ships:n,name:e}}e.d({},{t:()=>y,F:()=>b});const n=e=>{const t={},r=()=>{let e=String.fromCharCode(String(Math.round(7*Math.random()+97))),t=String(Math.floor(8*Math.random())+1);return e.concat(t)};return{makeMove:()=>{let e=r();for(;e in t;)e=r();return t[e]=!0,e},movesMade:t,turn:e}},l=document.getElementById("game-over-modal"),a=document.getElementById("winner-name-display"),o=document.getElementById("title-container"),c=document.getElementById("game-container"),s=document.getElementById("game-header"),i=document.getElementById("player-name"),d=document.getElementById("player-name-input"),h=document.querySelectorAll("#computer-gameboard .cell");for(let e of h)e.addEventListener("click",(()=>{["hit","miss"].some((t=>e.classList.contains(t)))||b[0].turn&&(u(e.dataset.coordinates,y[1]),y[1].checkAllShipsSunk()&&m("Computer loses. You win!"),b[0].turn=!1,u(b[1].makeMove(),y[0]),y[0].checkAllShipsSunk()&&m("You lose. Computer wins."),b[0].turn=!0)}));function u(e,t){!function(e,t,r){let n=null;n="player"===r.name?document.querySelector(`#player-gameboard [data-coordinates="${t}"]`):document.querySelector(`#computer-gameboard [data-coordinates="${t}"]`),e?n.classList.add("hit"):n.classList.add("miss")}(t.receiveAttack(e),e,t)}function m(e){l.style.display="block",a.innerText=e,console.log(y,b)}const p=document.getElementById("start-game"),g=document.getElementById("game-over-modal"),f=document.getElementById("game-over-btn"),y=[],b=[];function C(){const e=n(!0);b.push(e);const t=n(!1);b.push(t)}function S(){const e=r("player");e.placeCarrier("a1",!1),e.placeBattleship("b1",!1),e.placeCruiser("c1",!1),e.placeSubmarine("d1",!1),e.placeDestroyer("e1",!1),y.push(e);const t=r("computer");t.placeCarrier("a1",!1),t.placeBattleship("b1",!1),t.placeCruiser("c1",!1),t.placeSubmarine("d1",!1),t.placeDestroyer("e1",!1),y.push(t)}p.addEventListener("click",(()=>{!function(){o.style.display="none",c.style.display="grid",s.style.display="grid";const e=""==d.value?"Your":d.value+"'s";i.innerText=`${e} Board`}(),C(),S()})),f.addEventListener("click",(()=>{const e=document.querySelectorAll(".cell");for(let t of e)t.classList.remove("hit","miss");g.style.display="none",y.length=0,b.length=0,C(),S()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL0RPTS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZnVuY3Rpb24gc2hpcChuYW1lLCBsZW5ndGgpIHtcbiAgbGV0IHN1bmsgPSAwO1xuICBsZXQgaGl0cyA9IDA7XG5cbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgICsraGl0cztcbiAgICBpZihoaXRzID09PSBsZW5ndGgpIHtcbiAgICAgICsrc3VuaztcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hvd0hpdHMgPSAoKSA9PiBoaXRzO1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHN1bms7XG5cbiAgcmV0dXJuIHsgbmFtZSwgaGl0LCBsZW5ndGgsIHNob3dIaXRzLCBpc1N1bmsgfTtcbn1cblxuZXhwb3J0IHsgc2hpcCB9OyIsImltcG9ydCB7IHNoaXAgfSBmcm9tIFwiLi9zaGlwc1wiO1xuXG5mdW5jdGlvbiBnYW1lQm9hcmQobmFtZSkge1xuICBjb25zdCBjb29yZGluYXRlcyA9IHtcbiAgICBhMTogJycsXG4gICAgYTI6ICcnLFxuICAgIGEzOiAnJyxcbiAgICBhNDogJycsXG4gICAgYTU6ICcnLFxuICAgIGE2OiAnJyxcbiAgICBhNzogJycsXG4gICAgYTg6ICcnLFxuICAgIGIxOiAnJyxcbiAgICBiMjogJycsXG4gICAgYjM6ICcnLFxuICAgIGI0OiAnJyxcbiAgICBiNTogJycsXG4gICAgYjY6ICcnLFxuICAgIGI3OiAnJyxcbiAgICBiODogJycsXG4gICAgYzE6ICcnLFxuICAgIGMyOiAnJyxcbiAgICBjMzogJycsXG4gICAgYzQ6ICcnLFxuICAgIGM1OiAnJyxcbiAgICBjNjogJycsXG4gICAgYzc6ICcnLFxuICAgIGM4OiAnJyxcbiAgICBkMTogJycsXG4gICAgZDI6ICcnLFxuICAgIGQzOiAnJyxcbiAgICBkNDogJycsXG4gICAgZDU6ICcnLFxuICAgIGQ2OiAnJyxcbiAgICBkNzogJycsXG4gICAgZDg6ICcnLFxuICAgIGUxOiAnJyxcbiAgICBlMjogJycsXG4gICAgZTM6ICcnLFxuICAgIGU0OiAnJyxcbiAgICBlNTogJycsXG4gICAgZTY6ICcnLFxuICAgIGU3OiAnJyxcbiAgICBlODogJycsXG4gICAgZjE6ICcnLFxuICAgIGYyOiAnJyxcbiAgICBmMzogJycsXG4gICAgZjQ6ICcnLFxuICAgIGY1OiAnJyxcbiAgICBmNjogJycsXG4gICAgZjc6ICcnLFxuICAgIGY4OiAnJyxcbiAgICBnMTogJycsXG4gICAgZzI6ICcnLFxuICAgIGczOiAnJyxcbiAgICBnNDogJycsXG4gICAgZzU6ICcnLFxuICAgIGc2OiAnJyxcbiAgICBnNzogJycsXG4gICAgZzg6ICcnLFxuICAgIGgxOiAnJyxcbiAgICBoMjogJycsXG4gICAgaDM6ICcnLFxuICAgIGg0OiAnJyxcbiAgICBoNTogJycsXG4gICAgaDY6ICcnLFxuICAgIGg3OiAnJyxcbiAgICBoODogJycsXG4gIH1cblxuICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gIGNvbnN0IHBsYWNlQ2FycmllciA9IChjb29yZHMsIHZlcnRpY2FsKSA9PiB7XG4gICAgY29uc3QgY2FycmllciA9IHNoaXAoJ2NhcnJpZXInLCA1KTtcbiAgICBsZXQgW2xldHRlciwgbnVtXSA9IGNvb3Jkcy5zcGxpdCgnJyk7XG4gICAgbnVtID0gTnVtYmVyKG51bSk7XG5cbiAgICBpZih2ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmKChudW0gKyBjYXJyaWVyLmxlbmd0aCkgPCAxMCkge1xuICAgICAgICBmb3IobGV0IGkgPSBudW07IGkgPCBudW0gKyBjYXJyaWVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbbGV0dGVyICsgaV0gPSAnY2Fycmllcic7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHMucHVzaChjYXJyaWVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgIGlmKGxldHRlci5jaGFyQ29kZUF0KCkgKyBjYXJyaWVyLmxlbmd0aCA8IDEwNSkge1xuICAgICAgICBsZXQgbGV0dGVyQ2hhckNvZGUgPSBsZXR0ZXIuY2hhckNvZGVBdCgpO1xuICAgICAgICBmb3IobGV0IGkgPSBsZXR0ZXJDaGFyQ29kZTsgaSA8IGxldHRlckNoYXJDb2RlICsgY2Fycmllci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCBjb29yZExldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbY29vcmRMZXR0ZXIgKyBudW1dID0gJ2NhcnJpZXInO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goY2Fycmllcik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICBjb25zdCBwbGFjZUJhdHRsZXNoaXAgPSAoY29vcmRzLCB2ZXJ0aWNhbCkgPT4ge1xuICAgIGNvbnN0IGJhdHRsZXNoaXAgPSBzaGlwKCdiYXR0bGVzaGlwJywgNCk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuXG4gICAgaWYodmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICBpZigobnVtICsgYmF0dGxlc2hpcC5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgZm9yKGxldCBpID0gbnVtOyBpIDwgbnVtICsgYmF0dGxlc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvb3JkaW5hdGVzW2xldHRlciArIGldID0gJ2JhdHRsZXNoaXAnO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goYmF0dGxlc2hpcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHZlcnRpY2FsID09PSB0cnVlKSB7XG4gICAgICBpZihsZXR0ZXIuY2hhckNvZGVBdCgpICsgYmF0dGxlc2hpcC5sZW5ndGggPCAxMDUpIHtcbiAgICAgICAgbGV0IGxldHRlckNoYXJDb2RlID0gbGV0dGVyLmNoYXJDb2RlQXQoKTtcbiAgICAgICAgZm9yKGxldCBpID0gbGV0dGVyQ2hhckNvZGU7IGkgPCBsZXR0ZXJDaGFyQ29kZSArIGJhdHRsZXNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgY29vcmRMZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xuICAgICAgICAgIGNvb3JkaW5hdGVzW2Nvb3JkTGV0dGVyICsgbnVtXSA9ICdiYXR0bGVzaGlwJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKGJhdHRsZXNoaXApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHBsYWNlQ3J1aXNlciA9IChjb29yZHMsIHZlcnRpY2FsKSA9PiB7XG4gICAgY29uc3QgY3J1aXNlciA9IHNoaXAoJ2NydWlzZXInLCAzKTtcbiAgICBsZXQgW2xldHRlciwgbnVtXSA9IGNvb3Jkcy5zcGxpdCgnJyk7XG4gICAgbnVtID0gTnVtYmVyKG51bSk7XG5cbiAgICBpZih2ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmKChudW0gKyBjcnVpc2VyLmxlbmd0aCkgPCAxMCkge1xuICAgICAgICBmb3IobGV0IGkgPSBudW07IGkgPCBudW0gKyBjcnVpc2VyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbbGV0dGVyICsgaV0gPSAnY3J1aXNlcic7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHMucHVzaChjcnVpc2VyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgIGlmKGxldHRlci5jaGFyQ29kZUF0KCkgKyBjcnVpc2VyLmxlbmd0aCA8IDEwNSkge1xuICAgICAgICBsZXQgbGV0dGVyQ2hhckNvZGUgPSBsZXR0ZXIuY2hhckNvZGVBdCgpO1xuICAgICAgICBmb3IobGV0IGkgPSBsZXR0ZXJDaGFyQ29kZTsgaSA8IGxldHRlckNoYXJDb2RlICsgY3J1aXNlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCBjb29yZExldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbY29vcmRMZXR0ZXIgKyBudW1dID0gJ2NydWlzZXInO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goY3J1aXNlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGxhY2VTdWJtYXJpbmUgPSAoY29vcmRzLCB2ZXJ0aWNhbCkgPT4ge1xuICAgIGNvbnN0IHN1Ym1hcmluZSA9IHNoaXAoJ3N1Ym1hcmluZScsIDMpO1xuICAgIGxldCBbbGV0dGVyLCBudW1dID0gY29vcmRzLnNwbGl0KCcnKTtcbiAgICBudW0gPSBOdW1iZXIobnVtKTtcblxuICAgIGlmKHZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgaWYoKG51bSArIHN1Ym1hcmluZS5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgZm9yKGxldCBpID0gbnVtOyBpIDwgbnVtICsgc3VibWFyaW5lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbbGV0dGVyICsgaV0gPSAnc3VibWFyaW5lJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKHN1Ym1hcmluZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHZlcnRpY2FsID09PSB0cnVlKSB7XG4gICAgICBpZihsZXR0ZXIuY2hhckNvZGVBdCgpICsgc3VibWFyaW5lLmxlbmd0aCA8IDEwNSkge1xuICAgICAgICBsZXQgbGV0dGVyQ2hhckNvZGUgPSBsZXR0ZXIuY2hhckNvZGVBdCgpO1xuICAgICAgICBmb3IobGV0IGkgPSBsZXR0ZXJDaGFyQ29kZTsgaSA8IGxldHRlckNoYXJDb2RlICsgc3VibWFyaW5lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGNvb3JkTGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAgICAgICBjb29yZGluYXRlc1tjb29yZExldHRlciArIG51bV0gPSAnc3VibWFyaW5lJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKHN1Ym1hcmluZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGxhY2VEZXN0cm95ZXIgPSAoY29vcmRzLCB2ZXJ0aWNhbCkgPT4ge1xuICAgIGNvbnN0IGRlc3Ryb3llciA9IHNoaXAoJ2Rlc3Ryb3llcicsIDIpO1xuICAgIGxldCBbbGV0dGVyLCBudW1dID0gY29vcmRzLnNwbGl0KCcnKTtcbiAgICBudW0gPSBOdW1iZXIobnVtKTtcblxuICAgIGlmKHZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgaWYoKG51bSArIGRlc3Ryb3llci5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgZm9yKGxldCBpID0gbnVtOyBpIDwgbnVtICsgZGVzdHJveWVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbbGV0dGVyICsgaV0gPSAnZGVzdHJveWVyJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKGRlc3Ryb3llcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHZlcnRpY2FsID09PSB0cnVlKSB7XG4gICAgICBpZihsZXR0ZXIuY2hhckNvZGVBdCgpICsgZGVzdHJveWVyLmxlbmd0aCA8IDEwNSkge1xuICAgICAgICBsZXQgbGV0dGVyQ2hhckNvZGUgPSBsZXR0ZXIuY2hhckNvZGVBdCgpO1xuICAgICAgICBmb3IobGV0IGkgPSBsZXR0ZXJDaGFyQ29kZTsgaSA8IGxldHRlckNoYXJDb2RlICsgZGVzdHJveWVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGNvb3JkTGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAgICAgICBjb29yZGluYXRlc1tjb29yZExldHRlciArIG51bV0gPSAnZGVzdHJveWVyJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKGRlc3Ryb3llcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZHMpID0+IHtcbiAgICBpZihjb29yZGluYXRlc1tjb29yZHNdKSB7XG4gICAgICBjaGVja0NlbGxDb250YWluc1NoaXAoY29vcmRpbmF0ZXNbY29vcmRzXSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29vcmRpbmF0ZXNbY29vcmRzXSA9ICdtaXNzJztcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBjaGVja0NlbGxDb250YWluc1NoaXAgPSAoY29vcmRzKSA9PiB7XG4gICAgc3dpdGNoIChjb29yZHMpIHtcbiAgICAgIGNhc2UgJ2NhcnJpZXInOlxuICAgICAgICBzaGlwc1swXS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiYXR0bGVzaGlwJzpcbiAgICAgICAgc2hpcHNbMV0uaGl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3J1aXNlcic6XG4gICAgICAgIHNoaXBzWzJdLmhpdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N1Ym1hcmluZSc6XG4gICAgICAgIHNoaXBzWzNdLmhpdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Rlc3Ryb3llcic6XG4gICAgICAgIHNoaXBzWzRdLmhpdCgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBjb25zdCBjaGVja0FsbFNoaXBzU3VuayA9ICgpID0+IHtcbiAgICBsZXQgY291bnQgPSBzaGlwcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHByZXYgKyBjdXJyLmlzU3VuaygpLCAwKTtcbiAgICBpZihjb3VudCA9PT0gNSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgY29vcmRpbmF0ZXMsIHBsYWNlQ2FycmllciwgcGxhY2VCYXR0bGVzaGlwLCBwbGFjZUNydWlzZXIsIHBsYWNlU3VibWFyaW5lLCBwbGFjZURlc3Ryb3llcixcbiAgICByZWNlaXZlQXR0YWNrLCBjaGVja0FsbFNoaXBzU3Vuaywgc2hpcHMsIG5hbWUgfTtcbn1cblxuZXhwb3J0IHsgZ2FtZUJvYXJkIH07IiwiY29uc3QgcGxheWVyID0gKHR1cm4pID0+IHtcbiAgY29uc3QgbW92ZXNNYWRlID0ge307XG5cbiAgY29uc3QgbWFrZU1vdmUgPSAoKSA9PiB7XG4gICAgbGV0IGNvb3JkcyA9IGdlbmVyYXRlQ29vcmRpbmF0ZSgpO1xuICAgIHdoaWxlKGNvb3JkcyBpbiBtb3Zlc01hZGUpe1xuICAgICAgY29vcmRzID0gZ2VuZXJhdGVDb29yZGluYXRlKCk7XG4gICAgfVxuICAgIG1vdmVzTWFkZVtjb29yZHNdID0gdHJ1ZTtcbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG5cbiAgY29uc3QgZ2VuZXJhdGVDb29yZGluYXRlID0gKCkgPT4ge1xuICAgIGxldCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFN0cmluZyhNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoMTA0IC0gOTcpICsgOTcpKSk7XG4gICAgbGV0IG51bSA9IFN0cmluZyhNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KSArIDEpO1xuICAgIHJldHVybiBsZXR0ZXIuY29uY2F0KG51bSk7XG4gIH1cblxuICByZXR1cm4geyBtYWtlTW92ZSwgbW92ZXNNYWRlLCB0dXJuIH1cbn1cblxuZXhwb3J0IHsgcGxheWVyIH07IiwiaW1wb3J0IHsgc2hpcCB9IGZyb20gXCIuL3NoaXBzXCI7XG5pbXBvcnQgeyBnYW1lQm9hcmQsY2hlY2tBbGxTaGlwc1N1bmsgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IHBsYXllciB9IGZyb20gJy4vcGxheWVyJztcbmltcG9ydCB7IGJvYXJkcywgcGxheWVycyB9IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLW92ZXItbW9kYWwnKTtcbmNvbnN0IHdpbm5lck5hbWVEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpbm5lci1uYW1lLWRpc3BsYXknKTtcbmNvbnN0IHRpdGxlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlLWNvbnRhaW5lcicpO1xuY29uc3QgZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNvbnRhaW5lcicpO1xuY29uc3QgZ2FtZUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWhlYWRlcicpO1xuY29uc3QgcGxheWVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXItbmFtZScpO1xuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci1uYW1lLWlucHV0Jyk7XG5jb25zdCBjb21wdXRlckNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2NvbXB1dGVyLWdhbWVib2FyZCAuY2VsbCcpO1xuXG5mdW5jdGlvbiBkaXNwbGF5Qm9hcmQoKSB7XG4gIHRpdGxlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGdhbWVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcbiAgZ2FtZUhlYWRlci5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xuXG4gIGNvbnN0IG5hbWUgPSBuYW1lSW5wdXQudmFsdWUgPT0gJycgPyAnWW91cic6IG5hbWVJbnB1dC52YWx1ZSArICdcXCdzJ1xuICBwbGF5ZXJOYW1lLmlubmVyVGV4dCA9IGAke25hbWV9IEJvYXJkYFxufVxuXG5mb3IobGV0IGNlbGwgb2YgY29tcHV0ZXJDZWxscykge1xuICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBbJ2hpdCcsICdtaXNzJ107XG4gICAgaWYoIWNsYXNzTmFtZXMuc29tZShjbGFzc05hbWUgPT4gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkpIHtcbiAgICAgIGlmKHBsYXllcnNbMF0udHVybikge1xuICAgICAgICBmaXJlKGNlbGwuZGF0YXNldC5jb29yZGluYXRlcywgYm9hcmRzWzFdKTtcbiAgICAgICAgaWYoYm9hcmRzWzFdLmNoZWNrQWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgICBkaXNwbGF5R2FtZU92ZXJTY3JlZW4oJ0NvbXB1dGVyIGxvc2VzLiBZb3Ugd2luIScpO1xuICAgICAgICB9XG4gICAgICAgIHBsYXllcnNbMF0udHVybiA9IGZhbHNlO1xuICBcbiAgICAgICAgZmlyZShwbGF5ZXJzWzFdLm1ha2VNb3ZlKCksIGJvYXJkc1swXSk7XG4gICAgICAgIGlmKGJvYXJkc1swXS5jaGVja0FsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgICAgZGlzcGxheUdhbWVPdmVyU2NyZWVuKCdZb3UgbG9zZS4gQ29tcHV0ZXIgd2lucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBwbGF5ZXJzWzBdLnR1cm4gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZpcmUoY29vcmRzLCBib2FyZCkge1xuICBjb25zdCBoaXQgPSBib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3Jkcyk7XG4gIGNoZWNrSGl0KGhpdCwgY29vcmRzLCBib2FyZClcbn1cblxuZnVuY3Rpb24gY2hlY2tIaXQoaGl0LCBjb29yZHMsIGJvYXJkKSB7XG4gIGxldCBjZWxsID0gbnVsbDtcbiAgaWYoYm9hcmQubmFtZSA9PT0gJ3BsYXllcicpIHtcbiAgICBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYXllci1nYW1lYm9hcmQgW2RhdGEtY29vcmRpbmF0ZXM9XCIke2Nvb3Jkc31cIl1gKTtcbiAgfSBlbHNlIHtcbiAgICBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NvbXB1dGVyLWdhbWVib2FyZCBbZGF0YS1jb29yZGluYXRlcz1cIiR7Y29vcmRzfVwiXWApO1xuICB9XG5cbiAgaWYoaGl0KSB7XG4gICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKTtcbiAgfSBlbHNlIHtcbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ21pc3MnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5R2FtZU92ZXJTY3JlZW4od2lubmVyKSB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB3aW5uZXJOYW1lRGlzcGxheS5pbm5lclRleHQgPSB3aW5uZXI7XG4gIGNvbnNvbGUubG9nKGJvYXJkcywgcGxheWVycylcbn1cblxuXG5leHBvcnQgeyBkaXNwbGF5Qm9hcmQgfSIsImltcG9ydCB7IHNoaXAgfSBmcm9tIFwiLi9zaGlwc1wiO1xuaW1wb3J0IHsgZ2FtZUJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBwbGF5ZXIgfSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgeyBkaXNwbGF5Qm9hcmQgfSBmcm9tICcuL0RPTSdcblxuY29uc3Qgc3RhcnRHYW1lQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LWdhbWUnKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1tb2RhbCcpO1xuY29uc3QgZ2FtZU92ZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1vdmVyLWJ0bicpO1xuY29uc3QgYm9hcmRzID0gW107XG5jb25zdCBwbGF5ZXJzID0gW11cblxuc3RhcnRHYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBkaXNwbGF5Qm9hcmQoKTtcbiAgY3JlYXRlUGxheWVycygpO1xuICBjcmVhdGVCb2FyZHMoKTtcbn0pO1xuXG5nYW1lT3ZlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICBmb3IobGV0IGNlbGwgb2YgY2VsbHMpIHtcbiAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpdCcsICdtaXNzJyk7XG4gIH1cbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgYm9hcmRzLmxlbmd0aCA9IDA7XG4gIHBsYXllcnMubGVuZ3RoID0gMDtcbiAgY3JlYXRlUGxheWVycygpO1xuICBjcmVhdGVCb2FyZHMoKTtcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVQbGF5ZXJzKCkge1xuICBjb25zdCBodW1hblBsYXllciA9IHBsYXllcih0cnVlKTtcbiAgcGxheWVycy5wdXNoKGh1bWFuUGxheWVyKTtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBwbGF5ZXIoZmFsc2UpO1xuICBwbGF5ZXJzLnB1c2goY29tcHV0ZXJQbGF5ZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCb2FyZHMoKSB7XG4gIGNvbnN0IHBsYXllckJvYXJkID0gZ2FtZUJvYXJkKCdwbGF5ZXInKTtcbiAgcGxheWVyQm9hcmQucGxhY2VDYXJyaWVyKCdhMScsIGZhbHNlKTtcbiAgcGxheWVyQm9hcmQucGxhY2VCYXR0bGVzaGlwKCdiMScsIGZhbHNlKTtcbiAgcGxheWVyQm9hcmQucGxhY2VDcnVpc2VyKCdjMScsIGZhbHNlKTtcbiAgcGxheWVyQm9hcmQucGxhY2VTdWJtYXJpbmUoJ2QxJywgZmFsc2UpO1xuICBwbGF5ZXJCb2FyZC5wbGFjZURlc3Ryb3llcignZTEnLCBmYWxzZSk7XG4gIGJvYXJkcy5wdXNoKHBsYXllckJvYXJkKTtcblxuICBjb25zdCBjb21wdXRlckJvYXJkID0gZ2FtZUJvYXJkKCdjb21wdXRlcicpO1xuICBjb21wdXRlckJvYXJkLnBsYWNlQ2FycmllcignYTEnLCBmYWxzZSk7XG4gIGNvbXB1dGVyQm9hcmQucGxhY2VCYXR0bGVzaGlwKCdiMScsIGZhbHNlKTtcbiAgY29tcHV0ZXJCb2FyZC5wbGFjZUNydWlzZXIoJ2MxJywgZmFsc2UpO1xuICBjb21wdXRlckJvYXJkLnBsYWNlU3VibWFyaW5lKCdkMScsIGZhbHNlKTtcbiAgY29tcHV0ZXJCb2FyZC5wbGFjZURlc3Ryb3llcignZTEnLCBmYWxzZSk7XG4gIGJvYXJkcy5wdXNoKGNvbXB1dGVyQm9hcmQpO1xufVxuXG5leHBvcnQgeyBib2FyZHMsIHBsYXllcnMgfSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNoaXAiLCJuYW1lIiwibGVuZ3RoIiwic3VuayIsImhpdHMiLCJoaXQiLCJzaG93SGl0cyIsImlzU3VuayIsImdhbWVCb2FyZCIsImNvb3JkaW5hdGVzIiwiYTEiLCJhMiIsImEzIiwiYTQiLCJhNSIsImE2IiwiYTciLCJhOCIsImIxIiwiYjIiLCJiMyIsImI0IiwiYjUiLCJiNiIsImI3IiwiYjgiLCJjMSIsImMyIiwiYzMiLCJjNCIsImM1IiwiYzYiLCJjNyIsImM4IiwiZDEiLCJkMiIsImQzIiwiZDQiLCJkNSIsImQ2IiwiZDciLCJkOCIsImUxIiwiZTIiLCJlMyIsImU0IiwiZTUiLCJlNiIsImU3IiwiZTgiLCJmMSIsImYyIiwiZjMiLCJmNCIsImY1IiwiZjYiLCJmNyIsImY4IiwiZzEiLCJnMiIsImczIiwiZzQiLCJnNSIsImc2IiwiZzciLCJnOCIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsImg3IiwiaDgiLCJzaGlwcyIsInBsYWNlQ2FycmllciIsImNvb3JkcyIsInZlcnRpY2FsIiwiY2FycmllciIsImxldHRlciIsIm51bSIsInNwbGl0IiwiTnVtYmVyIiwiaSIsInB1c2giLCJjaGFyQ29kZUF0IiwibGV0dGVyQ2hhckNvZGUiLCJjb29yZExldHRlciIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInBsYWNlQmF0dGxlc2hpcCIsImJhdHRsZXNoaXAiLCJwbGFjZUNydWlzZXIiLCJjcnVpc2VyIiwicGxhY2VTdWJtYXJpbmUiLCJzdWJtYXJpbmUiLCJwbGFjZURlc3Ryb3llciIsImRlc3Ryb3llciIsInJlY2VpdmVBdHRhY2siLCJjaGVja0NlbGxDb250YWluc1NoaXAiLCJjaGVja0FsbFNoaXBzU3VuayIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwicGxheWVyIiwidHVybiIsIm1vdmVzTWFkZSIsImdlbmVyYXRlQ29vcmRpbmF0ZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImZsb29yIiwiY29uY2F0IiwibWFrZU1vdmUiLCJtb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aW5uZXJOYW1lRGlzcGxheSIsInRpdGxlQ29udGFpbmVyIiwiZ2FtZUNvbnRhaW5lciIsImdhbWVIZWFkZXIiLCJwbGF5ZXJOYW1lIiwibmFtZUlucHV0IiwiY29tcHV0ZXJDZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjZWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvbWUiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInBsYXllcnMiLCJmaXJlIiwiZGF0YXNldCIsImJvYXJkcyIsImRpc3BsYXlHYW1lT3ZlclNjcmVlbiIsImJvYXJkIiwicXVlcnlTZWxlY3RvciIsImFkZCIsImNoZWNrSGl0Iiwid2lubmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5uZXJUZXh0IiwiY29uc29sZSIsImxvZyIsInN0YXJ0R2FtZUJ0biIsImdhbWVPdmVyQnRuIiwiY3JlYXRlUGxheWVycyIsImh1bWFuUGxheWVyIiwiY29tcHV0ZXJQbGF5ZXIiLCJjcmVhdGVCb2FyZHMiLCJwbGF5ZXJCb2FyZCIsImNvbXB1dGVyQm9hcmQiLCJ2YWx1ZSIsImRpc3BsYXlCb2FyZCIsImNlbGxzIiwicmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIifQ==