(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){let n=0,r=0;return{name:e,hit:()=>{++r,r===t&&++n},length:t,showHits:()=>r,isSunk:()=>n}}function n(e){const n={a1:"",a2:"",a3:"",a4:"",a5:"",a6:"",a7:"",a8:"",b1:"",b2:"",b3:"",b4:"",b5:"",b6:"",b7:"",b8:"",c1:"",c2:"",c3:"",c4:"",c5:"",c6:"",c7:"",c8:"",d1:"",d2:"",d3:"",d4:"",d5:"",d6:"",d7:"",d8:"",e1:"",e2:"",e3:"",e4:"",e5:"",e6:"",e7:"",e8:"",f1:"",f2:"",f3:"",f4:"",f5:"",f6:"",f7:"",f8:"",g1:"",g2:"",g3:"",g4:"",g5:"",g6:"",g7:"",g8:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:"",h7:"",h8:""},r=[];let a=0;function c(e,t,c,s,o){if(!1===o){if(s+e.length<10){const o=function(e,t,r){const a=[];for(let c=t;c<t+e;c++){if(n[r+c])return console.log("false"),!1;a.push(r+c)}return a}(e.length,s,c);if(0!=o){for(let e of o)n[e]=t,document.querySelector(`[data-coordinates="${e}"]`).dataset.ship=t;r.push(e),a++,document.getElementById("ship-placement-input").classList.remove("error")}else document.getElementById("ship-placement-input").classList.add("error")}}else if(!0===o&&c.charCodeAt()+e.length<105){const o=function(e,t,r){const a=[];for(let c=t;c<t+e;c++){let e=String.fromCharCode(c);if(n[e+r])return console.log("false"),!1;a.push(e+r)}return a}(e.length,c.charCodeAt(),s);if(0!=o){for(let e of o)n[e]=t,document.querySelector(`[data-coordinates="${e}"]`).dataset.ship=t;r.push(e),a++,document.getElementById("ship-placement-input").classList.remove("error")}else document.getElementById("ship-placement-input").classList.add("error")}}return{coordinates:n,ships:r,name:e,placeCarrier:(e,n)=>{const r=t("carrier",5);let[a,s]=e.split("");s=Number(s),c(r,"carrier",a,s,n)},placeBattleship:(e,n)=>{const r=t("battleship",4);let[a,s]=e.split("");s=Number(s),c(r,"battleship",a,s,n)},placeCruiser:(e,n)=>{const r=t("cruiser",3);let[a,s]=e.split("");s=Number(s),c(r,"cruiser",a,s,n)},placeSubmarine:(e,n)=>{const r=t("submarine",3);let[a,s]=e.split("");s=Number(s),c(r,"submarine",a,s,n)},placeDestroyer:(e,n)=>{const r=t("destroyer",2);let[a,s]=e.split("");s=Number(s),c(r,"destroyer",a,s,n)},receiveAttack:e=>n[e]?((e=>{switch(e){case"carrier":r[0].hit();break;case"battleship":r[1].hit();break;case"cruiser":r[2].hit();break;case"submarine":r[3].hit();break;case"destroyer":r[4].hit()}})(n[e]),!0):(n[e]="miss",!1),checkAllShipsSunk:()=>{if(5===r.reduce(((e,t)=>e+t.isSunk()),0))return!0},getShipsPlaced:()=>a}}e.d({},{t:()=>B,F:()=>S});const r=e=>{const t={},n=()=>{let e=String.fromCharCode(String(Math.round(7*Math.random()+97))),t=String(Math.floor(8*Math.random())+1);return e.concat(t)};return{makeMove:()=>{let e=n();for(;e in t;)e=n();return t[e]=!0,e},movesMade:t,turn:e}},a=document.getElementById("game-over-modal"),c=document.getElementById("winner-name-display"),s=document.getElementById("title-container"),o=document.getElementById("game-container"),l=document.getElementById("game-header"),i=document.getElementById("player-name"),d=document.getElementById("player-name-input"),u=document.getElementById("ship-placement-container"),m=document.getElementById("computer-gameboard"),p=document.querySelectorAll("#computer-gameboard .cell");for(let e of p)e.addEventListener("click",(()=>{["hit","miss"].some((t=>e.classList.contains(t)))||S[0].turn&&(h(e.dataset.coordinates,B[1]),B[1].checkAllShipsSunk()&&g("Computer loses. You win!"),S[0].turn=!1,h(S[1].makeMove(),B[0]),B[0].checkAllShipsSunk()&&g("You lose. Computer wins."),S[0].turn=!0)}));function h(e,t){!function(e,t,n){let r=null;r="player"===n.name?document.querySelector(`#player-gameboard [data-coordinates="${t}"]`):document.querySelector(`#computer-gameboard [data-coordinates="${t}"]`),e?r.classList.add("hit"):r.classList.add("miss")}(t.receiveAttack(e),e,t)}function g(e){a.style.display="block",c.innerText=e,console.log(B,S)}const y=document.getElementById("start-game"),f=document.getElementById("game-over-modal"),b=document.getElementById("game-over-btn"),k=document.getElementById("ship-placement-input"),v=document.getElementById("rotate-btn"),E=document.getElementById("place-ship-btn"),B=[],S=[];let I=!1;function L(){const e=r(!0),t=r(!1);S.push(e),S.push(t)}function C(){const e=n("player"),t=n("computer");B.push(e),B.push(t)}y.addEventListener("click",(()=>{!function(){s.style.display="none",o.style.display="grid",l.style.display="grid";const e=""==d.value?"Your":d.value+"'s";i.innerText=`${e} Board`}(),L(),C(),k.focus()})),E.addEventListener("click",(()=>{!function(){switch(B[0].getShipsPlaced()){case 0:B[0].placeCarrier(k.value,I),I=!1;break;case 1:B[0].placeBattleship(k.value,I),I=!1;break;case 2:B[0].placeCruiser(k.value,I),I=!1;break;case 3:B[0].placeSubmarine(k.value,I),I=!1;break;case 4:B[0].placeDestroyer(k.value,I),u.style.display="none",m.style.display="block"}}(),k.value="",k.focus()})),v.addEventListener("click",(()=>{I=0==I})),b.addEventListener("click",(()=>{const e=document.querySelectorAll(".cell");for(let t of e)t.classList.remove("hit","miss");f.style.display="none",B.length=0,S.length=0,L(),C()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9ET00uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImZ1bmN0aW9uIHNoaXAobmFtZSwgbGVuZ3RoKSB7XG4gIGxldCBzdW5rID0gMDtcbiAgbGV0IGhpdHMgPSAwO1xuXG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICArK2hpdHM7XG4gICAgaWYoaGl0cyA9PT0gbGVuZ3RoKSB7XG4gICAgICArK3N1bms7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNob3dIaXRzID0gKCkgPT4gaGl0cztcblxuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdW5rO1xuXG4gIHJldHVybiB7IG5hbWUsIGhpdCwgbGVuZ3RoLCBzaG93SGl0cywgaXNTdW5rIH07XG59XG5cbmV4cG9ydCB7IHNoaXAgfTsiLCJpbXBvcnQgeyBzaGlwIH0gZnJvbSBcIi4vc2hpcHNcIjtcblxuZnVuY3Rpb24gZ2FtZUJvYXJkKG5hbWUpIHtcbiAgY29uc3QgY29vcmRpbmF0ZXMgPSB7XG4gICAgYTE6ICcnLFxuICAgIGEyOiAnJyxcbiAgICBhMzogJycsXG4gICAgYTQ6ICcnLFxuICAgIGE1OiAnJyxcbiAgICBhNjogJycsXG4gICAgYTc6ICcnLFxuICAgIGE4OiAnJyxcbiAgICBiMTogJycsXG4gICAgYjI6ICcnLFxuICAgIGIzOiAnJyxcbiAgICBiNDogJycsXG4gICAgYjU6ICcnLFxuICAgIGI2OiAnJyxcbiAgICBiNzogJycsXG4gICAgYjg6ICcnLFxuICAgIGMxOiAnJyxcbiAgICBjMjogJycsXG4gICAgYzM6ICcnLFxuICAgIGM0OiAnJyxcbiAgICBjNTogJycsXG4gICAgYzY6ICcnLFxuICAgIGM3OiAnJyxcbiAgICBjODogJycsXG4gICAgZDE6ICcnLFxuICAgIGQyOiAnJyxcbiAgICBkMzogJycsXG4gICAgZDQ6ICcnLFxuICAgIGQ1OiAnJyxcbiAgICBkNjogJycsXG4gICAgZDc6ICcnLFxuICAgIGQ4OiAnJyxcbiAgICBlMTogJycsXG4gICAgZTI6ICcnLFxuICAgIGUzOiAnJyxcbiAgICBlNDogJycsXG4gICAgZTU6ICcnLFxuICAgIGU2OiAnJyxcbiAgICBlNzogJycsXG4gICAgZTg6ICcnLFxuICAgIGYxOiAnJyxcbiAgICBmMjogJycsXG4gICAgZjM6ICcnLFxuICAgIGY0OiAnJyxcbiAgICBmNTogJycsXG4gICAgZjY6ICcnLFxuICAgIGY3OiAnJyxcbiAgICBmODogJycsXG4gICAgZzE6ICcnLFxuICAgIGcyOiAnJyxcbiAgICBnMzogJycsXG4gICAgZzQ6ICcnLFxuICAgIGc1OiAnJyxcbiAgICBnNjogJycsXG4gICAgZzc6ICcnLFxuICAgIGc4OiAnJyxcbiAgICBoMTogJycsXG4gICAgaDI6ICcnLFxuICAgIGgzOiAnJyxcbiAgICBoNDogJycsXG4gICAgaDU6ICcnLFxuICAgIGg2OiAnJyxcbiAgICBoNzogJycsXG4gICAgaDg6ICcnLFxuICB9XG5cbiAgY29uc3Qgc2hpcHMgPSBbXTtcbiAgbGV0IHNoaXBzUGxhY2VkID0gMDtcblxuICBjb25zdCBnZXRTaGlwc1BsYWNlZCA9ICgpID0+IHtcbiAgICByZXR1cm4gc2hpcHNQbGFjZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0NlbGxBdmFpbGFibGl0eUhvcml6b250YWwoc2hpcExlbmd0aCwgY29vcmROdW0sIGxldHRlcikge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvcihsZXQgaSA9IGNvb3JkTnVtOyBpIDwgY29vcmROdW0gKyBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKGNvb3JkaW5hdGVzW2xldHRlciArIGldKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmYWxzZScpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcnIucHVzaChsZXR0ZXIgKyBpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrQ2VsbEF2YWlsYWJsaXR5VmVydGljYWwoc2hpcExlbmd0aCwgbGV0dGVyQ2hhckNvZGUsIG51bSApIHtcbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICBmb3IobGV0IGkgPSBsZXR0ZXJDaGFyQ29kZTsgaSA8IGxldHRlckNoYXJDb2RlICsgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgY29vcmRMZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xuICAgICAgaWYoY29vcmRpbmF0ZXNbY29vcmRMZXR0ZXIgKyBudW1dKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmYWxzZScpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcnIucHVzaChjb29yZExldHRlciArIG51bSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBmdW5jdGlvbiBwbGFjZVNoaXAoc2hpcE9iaiwgc2hpcFN0cmluZywgbGV0dGVyLCBudW0sIHZlcnRpY2FsKSB7XG4gICAgaWYodmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICBpZigobnVtICsgc2hpcE9iai5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgLy9jaGVjayBpZiBjb29yZGluYXRlcyBhbHJlYWR5IGNvbnRhaW4gYSBzaGlwXG4gICAgICAgIGNvbnN0IHBsYWNlQ29vcmRpbmF0ZXMgPSBjaGVja0NlbGxBdmFpbGFibGl0eUhvcml6b250YWwoc2hpcE9iai5sZW5ndGgsIG51bSwgbGV0dGVyKTtcbiAgICAgICAgaWYocGxhY2VDb29yZGluYXRlcyAhPSBmYWxzZSkge1xuICAgICAgICAgIGZvcihsZXQgY29vcmRpbmF0ZSBvZiBwbGFjZUNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlc1tjb29yZGluYXRlXSA9IHNoaXBTdHJpbmc7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb29yZGluYXRlcz1cIiR7Y29vcmRpbmF0ZX1cIl1gKS5kYXRhc2V0LnNoaXAgPSBzaGlwU3RyaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGlwcy5wdXNoKHNoaXBPYmopO1xuICAgICAgICAgIHNoaXBzUGxhY2VkKys7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaXAtcGxhY2VtZW50LWlucHV0JykuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1wbGFjZW1lbnQtaW5wdXQnKS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHZlcnRpY2FsID09PSB0cnVlKSB7XG4gICAgICBpZihsZXR0ZXIuY2hhckNvZGVBdCgpICsgc2hpcE9iai5sZW5ndGggPCAxMDUpIHtcbiAgICAgICAgLy9jaGVjayBpZiBjb29yZGluYXRlcyBhbHJlYWR5IGNvbnRhaW4gYSBzaGlwXG4gICAgICAgIGNvbnN0IHBsYWNlQ29vcmRpbmF0ZXMgPSBjaGVja0NlbGxBdmFpbGFibGl0eVZlcnRpY2FsKHNoaXBPYmoubGVuZ3RoLCBsZXR0ZXIuY2hhckNvZGVBdCgpLCBudW0pO1xuICAgICAgICBpZihwbGFjZUNvb3JkaW5hdGVzICE9IGZhbHNlKSB7XG4gICAgICAgICAgZm9yKGxldCBjb29yZGluYXRlIG9mIHBsYWNlQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVdID0gc2hpcFN0cmluZztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvb3JkaW5hdGVzPVwiJHtjb29yZGluYXRlfVwiXWApLmRhdGFzZXQuc2hpcCA9IHNoaXBTdHJpbmc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNoaXBzLnB1c2goc2hpcE9iaik7XG4gICAgICAgICAgc2hpcHNQbGFjZWQrKztcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1wbGFjZW1lbnQtaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGlwLXBsYWNlbWVudC1pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBwbGFjZUNhcnJpZXIgPSAoY29vcmRzLCB2ZXJ0aWNhbCkgPT4ge1xuICAgIGNvbnN0IGNhcnJpZXIgPSBzaGlwKCdjYXJyaWVyJywgNSk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuXG4gICAgcGxhY2VTaGlwKGNhcnJpZXIsICdjYXJyaWVyJywgbGV0dGVyLCBudW0sIHZlcnRpY2FsKTtcbiAgfVxuICBcbiAgY29uc3QgcGxhY2VCYXR0bGVzaGlwID0gKGNvb3JkcywgdmVydGljYWwpID0+IHtcbiAgICBjb25zdCBiYXR0bGVzaGlwID0gc2hpcCgnYmF0dGxlc2hpcCcsIDQpO1xuICAgIGxldCBbbGV0dGVyLCBudW1dID0gY29vcmRzLnNwbGl0KCcnKTtcbiAgICBudW0gPSBOdW1iZXIobnVtKTtcblxuICAgIHBsYWNlU2hpcChiYXR0bGVzaGlwLCAnYmF0dGxlc2hpcCcsIGxldHRlciwgbnVtLCB2ZXJ0aWNhbCk7XG4gIH1cblxuICBjb25zdCBwbGFjZUNydWlzZXIgPSAoY29vcmRzLCB2ZXJ0aWNhbCkgPT4ge1xuICAgIGNvbnN0IGNydWlzZXIgPSBzaGlwKCdjcnVpc2VyJywgMyk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuXG4gICAgcGxhY2VTaGlwKGNydWlzZXIsICdjcnVpc2VyJywgbGV0dGVyLCBudW0sIHZlcnRpY2FsKTtcbiAgfVxuXG4gIGNvbnN0IHBsYWNlU3VibWFyaW5lID0gKGNvb3JkcywgdmVydGljYWwpID0+IHtcbiAgICBjb25zdCBzdWJtYXJpbmUgPSBzaGlwKCdzdWJtYXJpbmUnLCAzKTtcbiAgICBsZXQgW2xldHRlciwgbnVtXSA9IGNvb3Jkcy5zcGxpdCgnJyk7XG4gICAgbnVtID0gTnVtYmVyKG51bSk7XG5cbiAgICBwbGFjZVNoaXAoc3VibWFyaW5lLCAnc3VibWFyaW5lJywgbGV0dGVyLCBudW0sIHZlcnRpY2FsKTtcbiAgfVxuXG4gIGNvbnN0IHBsYWNlRGVzdHJveWVyID0gKGNvb3JkcywgdmVydGljYWwpID0+IHtcbiAgICBjb25zdCBkZXN0cm95ZXIgPSBzaGlwKCdkZXN0cm95ZXInLCAyKTtcbiAgICBsZXQgW2xldHRlciwgbnVtXSA9IGNvb3Jkcy5zcGxpdCgnJyk7XG4gICAgbnVtID0gTnVtYmVyKG51bSk7XG5cbiAgICBwbGFjZVNoaXAoZGVzdHJveWVyLCAnZGVzdHJveWVyJywgbGV0dGVyLCBudW0sIHZlcnRpY2FsKTtcbiAgfVxuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRzKSA9PiB7XG4gICAgaWYoY29vcmRpbmF0ZXNbY29vcmRzXSkge1xuICAgICAgY2hlY2tDZWxsQ29udGFpbnNTaGlwKGNvb3JkaW5hdGVzW2Nvb3Jkc10pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvb3JkaW5hdGVzW2Nvb3Jkc10gPSAnbWlzcyc7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2hlY2tDZWxsQ29udGFpbnNTaGlwID0gKGNvb3JkcykgPT4ge1xuICAgIHN3aXRjaCAoY29vcmRzKSB7XG4gICAgICBjYXNlICdjYXJyaWVyJzpcbiAgICAgICAgc2hpcHNbMF0uaGl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmF0dGxlc2hpcCc6XG4gICAgICAgIHNoaXBzWzFdLmhpdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NydWlzZXInOlxuICAgICAgICBzaGlwc1syXS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdWJtYXJpbmUnOlxuICAgICAgICBzaGlwc1szXS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZXN0cm95ZXInOlxuICAgICAgICBzaGlwc1s0XS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2hlY2tBbGxTaGlwc1N1bmsgPSAoKSA9PiB7XG4gICAgbGV0IGNvdW50ID0gc2hpcHMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBwcmV2ICsgY3Vyci5pc1N1bmsoKSwgMCk7XG4gICAgaWYoY291bnQgPT09IDUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IGNvb3JkaW5hdGVzLCBzaGlwcywgbmFtZSwgcGxhY2VDYXJyaWVyLCBwbGFjZUJhdHRsZXNoaXAsIHBsYWNlQ3J1aXNlciwgcGxhY2VTdWJtYXJpbmUsIHBsYWNlRGVzdHJveWVyLFxuICAgIHJlY2VpdmVBdHRhY2ssIGNoZWNrQWxsU2hpcHNTdW5rLCBnZXRTaGlwc1BsYWNlZCB9O1xufVxuXG5leHBvcnQgeyBnYW1lQm9hcmQgfTsiLCJjb25zdCBwbGF5ZXIgPSAodHVybikgPT4ge1xuICBjb25zdCBtb3Zlc01hZGUgPSB7fTtcblxuICBjb25zdCBtYWtlTW92ZSA9ICgpID0+IHtcbiAgICBsZXQgY29vcmRzID0gZ2VuZXJhdGVDb29yZGluYXRlKCk7XG4gICAgd2hpbGUoY29vcmRzIGluIG1vdmVzTWFkZSl7XG4gICAgICBjb29yZHMgPSBnZW5lcmF0ZUNvb3JkaW5hdGUoKTtcbiAgICB9XG4gICAgbW92ZXNNYWRlW2Nvb3Jkc10gPSB0cnVlO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICBjb25zdCBnZW5lcmF0ZUNvb3JkaW5hdGUgPSAoKSA9PiB7XG4gICAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoU3RyaW5nKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDQgLSA5NykgKyA5NykpKTtcbiAgICBsZXQgbnVtID0gU3RyaW5nKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpICsgMSk7XG4gICAgcmV0dXJuIGxldHRlci5jb25jYXQobnVtKTtcbiAgfVxuXG4gIHJldHVybiB7IG1ha2VNb3ZlLCBtb3Zlc01hZGUsIHR1cm4gfVxufVxuXG5leHBvcnQgeyBwbGF5ZXIgfTsiLCJpbXBvcnQgeyBzaGlwIH0gZnJvbSBcIi4vc2hpcHNcIjtcbmltcG9ydCB7IGdhbWVCb2FyZCxjaGVja0FsbFNoaXBzU3VuayB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuaW1wb3J0IHsgcGxheWVyIH0gZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHsgYm9hcmRzLCBwbGF5ZXJzIH0gZnJvbSAnLi9pbmRleCc7XG5cbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1tb2RhbCcpO1xuY29uc3Qgd2lubmVyTmFtZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lubmVyLW5hbWUtZGlzcGxheScpO1xuY29uc3QgdGl0bGVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUtY29udGFpbmVyJyk7XG5jb25zdCBnYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY29udGFpbmVyJyk7XG5jb25zdCBnYW1lSGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtaGVhZGVyJyk7XG5jb25zdCBwbGF5ZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci1uYW1lJyk7XG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLW5hbWUtaW5wdXQnKTtcbmNvbnN0IHNoaXBQbGFjZW1lbnRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1wbGFjZW1lbnQtY29udGFpbmVyJyk7XG5jb25zdCBjb21wdXRlckdhbWVib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wdXRlci1nYW1lYm9hcmQnKTtcbmNvbnN0IGNvbXB1dGVyQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjY29tcHV0ZXItZ2FtZWJvYXJkIC5jZWxsJyk7XG5cblxuZnVuY3Rpb24gZGlzcGxheUJvYXJkKCkge1xuICB0aXRsZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBnYW1lQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XG4gIGdhbWVIZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcblxuICBjb25zdCBuYW1lID0gbmFtZUlucHV0LnZhbHVlID09ICcnID8gJ1lvdXInOiBuYW1lSW5wdXQudmFsdWUgKyAnXFwncydcbiAgcGxheWVyTmFtZS5pbm5lclRleHQgPSBgJHtuYW1lfSBCb2FyZGBcbn1cblxuZm9yKGxldCBjZWxsIG9mIGNvbXB1dGVyQ2VsbHMpIHtcbiAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBjbGFzc05hbWVzID0gWydoaXQnLCAnbWlzcyddO1xuICAgIGlmKCFjbGFzc05hbWVzLnNvbWUoY2xhc3NOYW1lID0+IGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpKSB7XG4gICAgICBpZihwbGF5ZXJzWzBdLnR1cm4pIHtcbiAgICAgICAgZmlyZShjZWxsLmRhdGFzZXQuY29vcmRpbmF0ZXMsIGJvYXJkc1sxXSk7XG4gICAgICAgIGlmKGJvYXJkc1sxXS5jaGVja0FsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgICAgZGlzcGxheUdhbWVPdmVyU2NyZWVuKCdDb21wdXRlciBsb3Nlcy4gWW91IHdpbiEnKTtcbiAgICAgICAgfVxuICAgICAgICBwbGF5ZXJzWzBdLnR1cm4gPSBmYWxzZTtcbiAgXG4gICAgICAgIGZpcmUocGxheWVyc1sxXS5tYWtlTW92ZSgpLCBib2FyZHNbMF0pO1xuICAgICAgICBpZihib2FyZHNbMF0uY2hlY2tBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICAgIGRpc3BsYXlHYW1lT3ZlclNjcmVlbignWW91IGxvc2UuIENvbXB1dGVyIHdpbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGxheWVyc1swXS50dXJuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmaXJlKGNvb3JkcywgYm9hcmQpIHtcbiAgY29uc3QgaGl0ID0gYm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZHMpO1xuICBjaGVja0hpdChoaXQsIGNvb3JkcywgYm9hcmQpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSGl0KGhpdCwgY29vcmRzLCBib2FyZCkge1xuICBsZXQgY2VsbCA9IG51bGw7XG4gIGlmKGJvYXJkLm5hbWUgPT09ICdwbGF5ZXInKSB7XG4gICAgY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwbGF5ZXItZ2FtZWJvYXJkIFtkYXRhLWNvb3JkaW5hdGVzPVwiJHtjb29yZHN9XCJdYCk7XG4gIH0gZWxzZSB7XG4gICAgY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjb21wdXRlci1nYW1lYm9hcmQgW2RhdGEtY29vcmRpbmF0ZXM9XCIke2Nvb3Jkc31cIl1gKTtcbiAgfVxuXG4gIGlmKGhpdCkge1xuICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGl0Jyk7XG4gIH0gZWxzZSB7XG4gICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdtaXNzJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlzcGxheVN0YXJ0TWF0Y2hCdG4oKSB7XG4gIHNoaXBQbGFjZW1lbnRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgY29tcHV0ZXJHYW1lYm9hcmQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlHYW1lT3ZlclNjcmVlbih3aW5uZXIpIHtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIHdpbm5lck5hbWVEaXNwbGF5LmlubmVyVGV4dCA9IHdpbm5lcjtcbiAgY29uc29sZS5sb2coYm9hcmRzLCBwbGF5ZXJzKVxufVxuXG5cbmV4cG9ydCB7IGRpc3BsYXlCb2FyZCwgZGlzcGxheVN0YXJ0TWF0Y2hCdG4gfSIsImltcG9ydCB7IHNoaXAgfSBmcm9tIFwiLi9zaGlwc1wiO1xuaW1wb3J0IHsgZ2FtZUJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBwbGF5ZXIgfSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgeyBkaXNwbGF5Qm9hcmQsIGRpc3BsYXlTdGFydE1hdGNoQnRuIH0gZnJvbSAnLi9ET00nXG5cbmNvbnN0IHN0YXJ0R2FtZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1nYW1lJyk7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLW92ZXItbW9kYWwnKTtcbmNvbnN0IGdhbWVPdmVyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1idG4nKTtcbmNvbnN0IHNoaXBQbGFjZW1lbnRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGlwLXBsYWNlbWVudC1pbnB1dCcpO1xuY29uc3Qgcm90YXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvdGF0ZS1idG4nKTtcbmNvbnN0IHBsYWNlU2hpcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGFjZS1zaGlwLWJ0bicpO1xuXG5jb25zdCBib2FyZHMgPSBbXTtcbmNvbnN0IHBsYXllcnMgPSBbXVxubGV0IHZlcnRpY2FsID0gZmFsc2U7XG5cbnN0YXJ0R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZGlzcGxheUJvYXJkKCk7XG4gIGNyZWF0ZVBsYXllcnMoKTtcbiAgY3JlYXRlQm9hcmRzKCk7XG4gIHNoaXBQbGFjZW1lbnRJbnB1dC5mb2N1cygpO1xufSk7XG5cbnBsYWNlU2hpcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcGxhY2VTaGlwKCk7XG4gIHNoaXBQbGFjZW1lbnRJbnB1dC52YWx1ZSA9ICcnO1xuICBzaGlwUGxhY2VtZW50SW5wdXQuZm9jdXMoKTtcbn0pO1xuXG5yb3RhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHZlcnRpY2FsID0gdmVydGljYWwgPT0gZmFsc2UgPyB0cnVlIDogZmFsc2U7XG59KTtcblxuZ2FtZU92ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgZm9yKGxldCBjZWxsIG9mIGNlbGxzKSB7XG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaXQnLCAnbWlzcycpO1xuICB9XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGJvYXJkcy5sZW5ndGggPSAwO1xuICBwbGF5ZXJzLmxlbmd0aCA9IDA7XG4gIGNyZWF0ZVBsYXllcnMoKTtcbiAgY3JlYXRlQm9hcmRzKCk7XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlUGxheWVycygpIHtcbiAgY29uc3QgaHVtYW5QbGF5ZXIgPSBwbGF5ZXIodHJ1ZSk7XG4gIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gcGxheWVyKGZhbHNlKTtcbiAgcGxheWVycy5wdXNoKGh1bWFuUGxheWVyKTtcbiAgcGxheWVycy5wdXNoKGNvbXB1dGVyUGxheWVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQm9hcmRzKCkge1xuICBjb25zdCBwbGF5ZXJCb2FyZCA9IGdhbWVCb2FyZCgncGxheWVyJyk7XG4gIGNvbnN0IGNvbXB1dGVyQm9hcmQgPSBnYW1lQm9hcmQoJ2NvbXB1dGVyJyk7XG4gIGJvYXJkcy5wdXNoKHBsYXllckJvYXJkKTtcbiAgYm9hcmRzLnB1c2goY29tcHV0ZXJCb2FyZCk7XG59XG5cbmZ1bmN0aW9uIHBsYWNlU2hpcCgpIHtcbiAgc3dpdGNoIChib2FyZHNbMF0uZ2V0U2hpcHNQbGFjZWQoKSkge1xuICAgIGNhc2UgMDpcbiAgICAgIGJvYXJkc1swXS5wbGFjZUNhcnJpZXIoc2hpcFBsYWNlbWVudElucHV0LnZhbHVlLCB2ZXJ0aWNhbCk7XG4gICAgICB2ZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgYm9hcmRzWzBdLnBsYWNlQmF0dGxlc2hpcChzaGlwUGxhY2VtZW50SW5wdXQudmFsdWUsIHZlcnRpY2FsKTtcbiAgICAgIHZlcnRpY2FsID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBib2FyZHNbMF0ucGxhY2VDcnVpc2VyKHNoaXBQbGFjZW1lbnRJbnB1dC52YWx1ZSwgdmVydGljYWwpO1xuICAgICAgdmVydGljYWwgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIGJvYXJkc1swXS5wbGFjZVN1Ym1hcmluZShzaGlwUGxhY2VtZW50SW5wdXQudmFsdWUsIHZlcnRpY2FsKTtcbiAgICAgIHZlcnRpY2FsID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBib2FyZHNbMF0ucGxhY2VEZXN0cm95ZXIoc2hpcFBsYWNlbWVudElucHV0LnZhbHVlLCB2ZXJ0aWNhbCk7XG4gICAgICBkaXNwbGF5U3RhcnRNYXRjaEJ0bigpO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cblxuZXhwb3J0IHsgYm9hcmRzLCBwbGF5ZXJzIH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzaGlwIiwibmFtZSIsImxlbmd0aCIsInN1bmsiLCJoaXRzIiwiaGl0Iiwic2hvd0hpdHMiLCJpc1N1bmsiLCJnYW1lQm9hcmQiLCJjb29yZGluYXRlcyIsImExIiwiYTIiLCJhMyIsImE0IiwiYTUiLCJhNiIsImE3IiwiYTgiLCJiMSIsImIyIiwiYjMiLCJiNCIsImI1IiwiYjYiLCJiNyIsImI4IiwiYzEiLCJjMiIsImMzIiwiYzQiLCJjNSIsImM2IiwiYzciLCJjOCIsImQxIiwiZDIiLCJkMyIsImQ0IiwiZDUiLCJkNiIsImQ3IiwiZDgiLCJlMSIsImUyIiwiZTMiLCJlNCIsImU1IiwiZTYiLCJlNyIsImU4IiwiZjEiLCJmMiIsImYzIiwiZjQiLCJmNSIsImY2IiwiZjciLCJmOCIsImcxIiwiZzIiLCJnMyIsImc0IiwiZzUiLCJnNiIsImc3IiwiZzgiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJoNyIsImg4Iiwic2hpcHMiLCJzaGlwc1BsYWNlZCIsInBsYWNlU2hpcCIsInNoaXBPYmoiLCJzaGlwU3RyaW5nIiwibGV0dGVyIiwibnVtIiwidmVydGljYWwiLCJwbGFjZUNvb3JkaW5hdGVzIiwic2hpcExlbmd0aCIsImNvb3JkTnVtIiwiYXJyIiwiaSIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwiY2hlY2tDZWxsQXZhaWxhYmxpdHlIb3Jpem9udGFsIiwiY29vcmRpbmF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRhdGFzZXQiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImNoYXJDb2RlQXQiLCJsZXR0ZXJDaGFyQ29kZSIsImNvb3JkTGV0dGVyIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hlY2tDZWxsQXZhaWxhYmxpdHlWZXJ0aWNhbCIsInBsYWNlQ2FycmllciIsImNvb3JkcyIsImNhcnJpZXIiLCJzcGxpdCIsIk51bWJlciIsInBsYWNlQmF0dGxlc2hpcCIsImJhdHRsZXNoaXAiLCJwbGFjZUNydWlzZXIiLCJjcnVpc2VyIiwicGxhY2VTdWJtYXJpbmUiLCJzdWJtYXJpbmUiLCJwbGFjZURlc3Ryb3llciIsImRlc3Ryb3llciIsInJlY2VpdmVBdHRhY2siLCJjaGVja0NlbGxDb250YWluc1NoaXAiLCJjaGVja0FsbFNoaXBzU3VuayIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwiZ2V0U2hpcHNQbGFjZWQiLCJwbGF5ZXIiLCJ0dXJuIiwibW92ZXNNYWRlIiwiZ2VuZXJhdGVDb29yZGluYXRlIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiZmxvb3IiLCJjb25jYXQiLCJtYWtlTW92ZSIsIm1vZGFsIiwid2lubmVyTmFtZURpc3BsYXkiLCJ0aXRsZUNvbnRhaW5lciIsImdhbWVDb250YWluZXIiLCJnYW1lSGVhZGVyIiwicGxheWVyTmFtZSIsIm5hbWVJbnB1dCIsInNoaXBQbGFjZW1lbnRDb250YWluZXIiLCJjb21wdXRlckdhbWVib2FyZCIsImNvbXB1dGVyQ2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2VsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzb21lIiwiY2xhc3NOYW1lIiwiY29udGFpbnMiLCJwbGF5ZXJzIiwiZmlyZSIsImJvYXJkcyIsImRpc3BsYXlHYW1lT3ZlclNjcmVlbiIsImJvYXJkIiwiY2hlY2tIaXQiLCJ3aW5uZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lclRleHQiLCJzdGFydEdhbWVCdG4iLCJnYW1lT3ZlckJ0biIsInNoaXBQbGFjZW1lbnRJbnB1dCIsInJvdGF0ZUJ0biIsInBsYWNlU2hpcEJ0biIsImNyZWF0ZVBsYXllcnMiLCJodW1hblBsYXllciIsImNvbXB1dGVyUGxheWVyIiwiY3JlYXRlQm9hcmRzIiwicGxheWVyQm9hcmQiLCJjb21wdXRlckJvYXJkIiwidmFsdWUiLCJkaXNwbGF5Qm9hcmQiLCJmb2N1cyIsImNlbGxzIl0sInNvdXJjZVJvb3QiOiIifQ==