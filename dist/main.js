(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){let r=0,n=0;return{name:e,hit:()=>{++n,n===t&&++r},length:t,showHits:()=>n,isSunk:()=>r}}function r(e){const r={a1:"",a2:"",a3:"",a4:"",a5:"",a6:"",a7:"",a8:"",b1:"",b2:"",b3:"",b4:"",b5:"",b6:"",b7:"",b8:"",c1:"",c2:"",c3:"",c4:"",c5:"",c6:"",c7:"",c8:"",d1:"",d2:"",d3:"",d4:"",d5:"",d6:"",d7:"",d8:"",e1:"",e2:"",e3:"",e4:"",e5:"",e6:"",e7:"",e8:"",f1:"",f2:"",f3:"",f4:"",f5:"",f6:"",f7:"",f8:"",g1:"",g2:"",g3:"",g4:"",g5:"",g6:"",g7:"",g8:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:"",h7:"",h8:""},n=[];return{coordinates:r,placeCarrier:(e,l)=>{const a=t("carrier",5);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="carrier";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="carrier"}n.push(a)}},placeBattleship:(e,l)=>{const a=t("battleship",4);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="battleship";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="battleship"}n.push(a)}},placeCruiser:(e,l)=>{const a=t("cruiser",3);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="cruiser";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="cruiser"}n.push(a)}},placeSubmarine:(e,l)=>{const a=t("submarine",3);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="submarine";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="submarine"}n.push(a)}},placeDestroyer:(e,l)=>{const a=t("destroyer",2);let[o,c]=e.split("");if(c=Number(c),!1===l){if(c+a.length<10){for(let e=c;e<c+a.length;e++)r[o+e]="destroyer";n.push(a)}}else if(!0===l&&o.charCodeAt()+a.length<105){let e=o.charCodeAt();for(let t=e;t<e+a.length;t++){let e=String.fromCharCode(t);r[e+c]="destroyer"}n.push(a)}},receiveAttack:e=>r[e]?((e=>{switch(e){case"carrier":n[0].hit();break;case"battleship":n[1].hit();break;case"cruiser":n[2].hit();break;case"submarine":n[3].hit();break;case"destroyer":n[4].hit()}})(r[e]),!0):(r[e]="miss",!1),checkAllShipsSunk:()=>{if(5===n.reduce(((e,t)=>e+t.isSunk()),0))return!0},ships:n,name:e}}e.d({},{t:()=>y,F:()=>b});const n=e=>{const t={},r=()=>{let e=String.fromCharCode(String(Math.round(7*Math.random()+97))),t=String(Math.floor(8*Math.random())+1);return e.concat(t)};return{makeMove:()=>{let e=r();for(;e in t;)e=r();return t[e]=!0,e},movesMade:t,turn:e}},l=document.getElementById("game-over-modal"),a=document.getElementById("winner-name-display"),o=document.getElementById("title-container"),c=document.getElementById("game-container"),s=document.getElementById("game-header"),i=document.getElementById("player-name"),d=document.getElementById("player-name-input"),h=document.querySelectorAll("#computer-gameboard .cell");for(let e of h)e.addEventListener("click",(()=>{b[0].turn&&(u(e.dataset.coordinates,y[1]),y[1].checkAllShipsSunk()&&m("Computer loses. You win!"),b[0].turn=!1,u(b[1].makeMove(),y[0]),y[0].checkAllShipsSunk()&&m("You lose. Computer wins."),b[0].turn=!0)}));function u(e,t){!function(e,t,r){let n=null;n="player"===r.name?document.querySelector(`#player-gameboard [data-coordinates="${t}"]`):document.querySelector(`#computer-gameboard [data-coordinates="${t}"]`),e?n.classList.add("hit"):n.classList.add("miss")}(t.receiveAttack(e),e,t)}function m(e){l.style.display="block",a.innerText=e,console.log(y,b)}const p=document.getElementById("start-game"),g=document.getElementById("game-over-modal"),f=document.getElementById("game-over-btn"),y=[],b=[];function C(){const e=n(!0);b.push(e);const t=n(!1);b.push(t)}function S(){const e=r("player");e.placeCarrier("a1",!1),e.placeBattleship("b1",!1),e.placeCruiser("c1",!1),e.placeSubmarine("d1",!1),e.placeDestroyer("e1",!1),y.push(e);const t=r("computer");t.placeCarrier("a1",!1),t.placeBattleship("b1",!1),t.placeCruiser("c1",!1),t.placeSubmarine("d1",!1),t.placeDestroyer("e1",!1),y.push(t)}p.addEventListener("click",(()=>{!function(){o.style.display="none",c.style.display="grid",s.style.display="grid";const e=""==d.value?"Your":d.value+"'s";i.innerText=`${e} Board`}(),C(),S()})),f.addEventListener("click",(()=>{const e=document.querySelectorAll(".cell");for(let t of e)t.style.backgroundColor="white";g.style.display="none",y.length=0,b.length=0,C(),S()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvRE9NLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJmdW5jdGlvbiBzaGlwKG5hbWUsIGxlbmd0aCkge1xuICBsZXQgc3VuayA9IDA7XG4gIGxldCBoaXRzID0gMDtcblxuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgKytoaXRzO1xuICAgIGlmKGhpdHMgPT09IGxlbmd0aCkge1xuICAgICAgKytzdW5rO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaG93SGl0cyA9ICgpID0+IGhpdHM7XG5cbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3VuaztcblxuICByZXR1cm4geyBuYW1lLCBoaXQsIGxlbmd0aCwgc2hvd0hpdHMsIGlzU3VuayB9O1xufVxuXG5leHBvcnQgeyBzaGlwIH07IiwiaW1wb3J0IHsgc2hpcCB9IGZyb20gXCIuL3NoaXBzXCI7XG5cbmZ1bmN0aW9uIGdhbWVCb2FyZChuYW1lKSB7XG4gIGNvbnN0IGNvb3JkaW5hdGVzID0ge1xuICAgIGExOiAnJyxcbiAgICBhMjogJycsXG4gICAgYTM6ICcnLFxuICAgIGE0OiAnJyxcbiAgICBhNTogJycsXG4gICAgYTY6ICcnLFxuICAgIGE3OiAnJyxcbiAgICBhODogJycsXG4gICAgYjE6ICcnLFxuICAgIGIyOiAnJyxcbiAgICBiMzogJycsXG4gICAgYjQ6ICcnLFxuICAgIGI1OiAnJyxcbiAgICBiNjogJycsXG4gICAgYjc6ICcnLFxuICAgIGI4OiAnJyxcbiAgICBjMTogJycsXG4gICAgYzI6ICcnLFxuICAgIGMzOiAnJyxcbiAgICBjNDogJycsXG4gICAgYzU6ICcnLFxuICAgIGM2OiAnJyxcbiAgICBjNzogJycsXG4gICAgYzg6ICcnLFxuICAgIGQxOiAnJyxcbiAgICBkMjogJycsXG4gICAgZDM6ICcnLFxuICAgIGQ0OiAnJyxcbiAgICBkNTogJycsXG4gICAgZDY6ICcnLFxuICAgIGQ3OiAnJyxcbiAgICBkODogJycsXG4gICAgZTE6ICcnLFxuICAgIGUyOiAnJyxcbiAgICBlMzogJycsXG4gICAgZTQ6ICcnLFxuICAgIGU1OiAnJyxcbiAgICBlNjogJycsXG4gICAgZTc6ICcnLFxuICAgIGU4OiAnJyxcbiAgICBmMTogJycsXG4gICAgZjI6ICcnLFxuICAgIGYzOiAnJyxcbiAgICBmNDogJycsXG4gICAgZjU6ICcnLFxuICAgIGY2OiAnJyxcbiAgICBmNzogJycsXG4gICAgZjg6ICcnLFxuICAgIGcxOiAnJyxcbiAgICBnMjogJycsXG4gICAgZzM6ICcnLFxuICAgIGc0OiAnJyxcbiAgICBnNTogJycsXG4gICAgZzY6ICcnLFxuICAgIGc3OiAnJyxcbiAgICBnODogJycsXG4gICAgaDE6ICcnLFxuICAgIGgyOiAnJyxcbiAgICBoMzogJycsXG4gICAgaDQ6ICcnLFxuICAgIGg1OiAnJyxcbiAgICBoNjogJycsXG4gICAgaDc6ICcnLFxuICAgIGg4OiAnJyxcbiAgfVxuXG4gIGNvbnN0IHNoaXBzID0gW107XG5cbiAgY29uc3QgcGxhY2VDYXJyaWVyID0gKGNvb3JkcywgdmVydGljYWwpID0+IHtcbiAgICBjb25zdCBjYXJyaWVyID0gc2hpcCgnY2FycmllcicsIDUpO1xuICAgIGxldCBbbGV0dGVyLCBudW1dID0gY29vcmRzLnNwbGl0KCcnKTtcbiAgICBudW0gPSBOdW1iZXIobnVtKTtcblxuICAgIGlmKHZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgaWYoKG51bSArIGNhcnJpZXIubGVuZ3RoKSA8IDEwKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IG51bTsgaSA8IG51bSArIGNhcnJpZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb29yZGluYXRlc1tsZXR0ZXIgKyBpXSA9ICdjYXJyaWVyJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKGNhcnJpZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih2ZXJ0aWNhbCA9PT0gdHJ1ZSkge1xuICAgICAgaWYobGV0dGVyLmNoYXJDb2RlQXQoKSArIGNhcnJpZXIubGVuZ3RoIDwgMTA1KSB7XG4gICAgICAgIGxldCBsZXR0ZXJDaGFyQ29kZSA9IGxldHRlci5jaGFyQ29kZUF0KCk7XG4gICAgICAgIGZvcihsZXQgaSA9IGxldHRlckNoYXJDb2RlOyBpIDwgbGV0dGVyQ2hhckNvZGUgKyBjYXJyaWVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGNvb3JkTGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAgICAgICBjb29yZGluYXRlc1tjb29yZExldHRlciArIG51bV0gPSAnY2Fycmllcic7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHMucHVzaChjYXJyaWVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHBsYWNlQmF0dGxlc2hpcCA9IChjb29yZHMsIHZlcnRpY2FsKSA9PiB7XG4gICAgY29uc3QgYmF0dGxlc2hpcCA9IHNoaXAoJ2JhdHRsZXNoaXAnLCA0KTtcbiAgICBsZXQgW2xldHRlciwgbnVtXSA9IGNvb3Jkcy5zcGxpdCgnJyk7XG4gICAgbnVtID0gTnVtYmVyKG51bSk7XG5cbiAgICBpZih2ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmKChudW0gKyBiYXR0bGVzaGlwLmxlbmd0aCkgPCAxMCkge1xuICAgICAgICBmb3IobGV0IGkgPSBudW07IGkgPCBudW0gKyBiYXR0bGVzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbbGV0dGVyICsgaV0gPSAnYmF0dGxlc2hpcCc7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHMucHVzaChiYXR0bGVzaGlwKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgIGlmKGxldHRlci5jaGFyQ29kZUF0KCkgKyBiYXR0bGVzaGlwLmxlbmd0aCA8IDEwNSkge1xuICAgICAgICBsZXQgbGV0dGVyQ2hhckNvZGUgPSBsZXR0ZXIuY2hhckNvZGVBdCgpO1xuICAgICAgICBmb3IobGV0IGkgPSBsZXR0ZXJDaGFyQ29kZTsgaSA8IGxldHRlckNoYXJDb2RlICsgYmF0dGxlc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCBjb29yZExldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbY29vcmRMZXR0ZXIgKyBudW1dID0gJ2JhdHRsZXNoaXAnO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goYmF0dGxlc2hpcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGxhY2VDcnVpc2VyID0gKGNvb3JkcywgdmVydGljYWwpID0+IHtcbiAgICBjb25zdCBjcnVpc2VyID0gc2hpcCgnY3J1aXNlcicsIDMpO1xuICAgIGxldCBbbGV0dGVyLCBudW1dID0gY29vcmRzLnNwbGl0KCcnKTtcbiAgICBudW0gPSBOdW1iZXIobnVtKTtcblxuICAgIGlmKHZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgaWYoKG51bSArIGNydWlzZXIubGVuZ3RoKSA8IDEwKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IG51bTsgaSA8IG51bSArIGNydWlzZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb29yZGluYXRlc1tsZXR0ZXIgKyBpXSA9ICdjcnVpc2VyJztcbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKGNydWlzZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih2ZXJ0aWNhbCA9PT0gdHJ1ZSkge1xuICAgICAgaWYobGV0dGVyLmNoYXJDb2RlQXQoKSArIGNydWlzZXIubGVuZ3RoIDwgMTA1KSB7XG4gICAgICAgIGxldCBsZXR0ZXJDaGFyQ29kZSA9IGxldHRlci5jaGFyQ29kZUF0KCk7XG4gICAgICAgIGZvcihsZXQgaSA9IGxldHRlckNoYXJDb2RlOyBpIDwgbGV0dGVyQ2hhckNvZGUgKyBjcnVpc2VyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGNvb3JkTGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAgICAgICBjb29yZGluYXRlc1tjb29yZExldHRlciArIG51bV0gPSAnY3J1aXNlcic7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHMucHVzaChjcnVpc2VyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBwbGFjZVN1Ym1hcmluZSA9IChjb29yZHMsIHZlcnRpY2FsKSA9PiB7XG4gICAgY29uc3Qgc3VibWFyaW5lID0gc2hpcCgnc3VibWFyaW5lJywgMyk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuXG4gICAgaWYodmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICBpZigobnVtICsgc3VibWFyaW5lLmxlbmd0aCkgPCAxMCkge1xuICAgICAgICBmb3IobGV0IGkgPSBudW07IGkgPCBudW0gKyBzdWJtYXJpbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb29yZGluYXRlc1tsZXR0ZXIgKyBpXSA9ICdzdWJtYXJpbmUnO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goc3VibWFyaW5lKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgIGlmKGxldHRlci5jaGFyQ29kZUF0KCkgKyBzdWJtYXJpbmUubGVuZ3RoIDwgMTA1KSB7XG4gICAgICAgIGxldCBsZXR0ZXJDaGFyQ29kZSA9IGxldHRlci5jaGFyQ29kZUF0KCk7XG4gICAgICAgIGZvcihsZXQgaSA9IGxldHRlckNoYXJDb2RlOyBpIDwgbGV0dGVyQ2hhckNvZGUgKyBzdWJtYXJpbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgY29vcmRMZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xuICAgICAgICAgIGNvb3JkaW5hdGVzW2Nvb3JkTGV0dGVyICsgbnVtXSA9ICdzdWJtYXJpbmUnO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goc3VibWFyaW5lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBwbGFjZURlc3Ryb3llciA9IChjb29yZHMsIHZlcnRpY2FsKSA9PiB7XG4gICAgY29uc3QgZGVzdHJveWVyID0gc2hpcCgnZGVzdHJveWVyJywgMik7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuXG4gICAgaWYodmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICBpZigobnVtICsgZGVzdHJveWVyLmxlbmd0aCkgPCAxMCkge1xuICAgICAgICBmb3IobGV0IGkgPSBudW07IGkgPCBudW0gKyBkZXN0cm95ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb29yZGluYXRlc1tsZXR0ZXIgKyBpXSA9ICdkZXN0cm95ZXInO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goZGVzdHJveWVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgIGlmKGxldHRlci5jaGFyQ29kZUF0KCkgKyBkZXN0cm95ZXIubGVuZ3RoIDwgMTA1KSB7XG4gICAgICAgIGxldCBsZXR0ZXJDaGFyQ29kZSA9IGxldHRlci5jaGFyQ29kZUF0KCk7XG4gICAgICAgIGZvcihsZXQgaSA9IGxldHRlckNoYXJDb2RlOyBpIDwgbGV0dGVyQ2hhckNvZGUgKyBkZXN0cm95ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgY29vcmRMZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xuICAgICAgICAgIGNvb3JkaW5hdGVzW2Nvb3JkTGV0dGVyICsgbnVtXSA9ICdkZXN0cm95ZXInO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzLnB1c2goZGVzdHJveWVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkcykgPT4ge1xuICAgIGlmKGNvb3JkaW5hdGVzW2Nvb3Jkc10pIHtcbiAgICAgIGNoZWNrQ2VsbENvbnRhaW5zU2hpcChjb29yZGluYXRlc1tjb29yZHNdKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb29yZGluYXRlc1tjb29yZHNdID0gJ21pc3MnO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNoZWNrQ2VsbENvbnRhaW5zU2hpcCA9IChjb29yZHMpID0+IHtcbiAgICBzd2l0Y2ggKGNvb3Jkcykge1xuICAgICAgY2FzZSAnY2Fycmllcic6XG4gICAgICAgIHNoaXBzWzBdLmhpdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2JhdHRsZXNoaXAnOlxuICAgICAgICBzaGlwc1sxXS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjcnVpc2VyJzpcbiAgICAgICAgc2hpcHNbMl0uaGl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3VibWFyaW5lJzpcbiAgICAgICAgc2hpcHNbM10uaGl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVzdHJveWVyJzpcbiAgICAgICAgc2hpcHNbNF0uaGl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNoZWNrQWxsU2hpcHNTdW5rID0gKCkgPT4ge1xuICAgIGxldCBjb3VudCA9IHNoaXBzLnJlZHVjZSgocHJldiwgY3VycikgPT4gcHJldiArIGN1cnIuaXNTdW5rKCksIDApO1xuICAgIGlmKGNvdW50ID09PSA1KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBjb29yZGluYXRlcywgcGxhY2VDYXJyaWVyLCBwbGFjZUJhdHRsZXNoaXAsIHBsYWNlQ3J1aXNlciwgcGxhY2VTdWJtYXJpbmUsIHBsYWNlRGVzdHJveWVyLFxuICAgIHJlY2VpdmVBdHRhY2ssIGNoZWNrQWxsU2hpcHNTdW5rLCBzaGlwcywgbmFtZSB9O1xufVxuXG5leHBvcnQgeyBnYW1lQm9hcmQgfTsiLCJjb25zdCBwbGF5ZXIgPSAodHVybikgPT4ge1xuICBjb25zdCBtb3Zlc01hZGUgPSB7fTtcblxuICBjb25zdCBtYWtlTW92ZSA9ICgpID0+IHtcbiAgICBsZXQgY29vcmRzID0gZ2VuZXJhdGVDb29yZGluYXRlKCk7XG4gICAgd2hpbGUoY29vcmRzIGluIG1vdmVzTWFkZSl7XG4gICAgICBjb29yZHMgPSBnZW5lcmF0ZUNvb3JkaW5hdGUoKTtcbiAgICB9XG4gICAgbW92ZXNNYWRlW2Nvb3Jkc10gPSB0cnVlO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICBjb25zdCBnZW5lcmF0ZUNvb3JkaW5hdGUgPSAoKSA9PiB7XG4gICAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoU3RyaW5nKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDQgLSA5NykgKyA5NykpKTtcbiAgICBsZXQgbnVtID0gU3RyaW5nKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpICsgMSk7XG4gICAgcmV0dXJuIGxldHRlci5jb25jYXQobnVtKTtcbiAgfVxuXG4gIHJldHVybiB7IG1ha2VNb3ZlLCBtb3Zlc01hZGUsIHR1cm4gfVxufVxuXG5leHBvcnQgeyBwbGF5ZXIgfTsiLCJpbXBvcnQgeyBzaGlwIH0gZnJvbSBcIi4vc2hpcHNcIjtcbmltcG9ydCB7IGdhbWVCb2FyZCxjaGVja0FsbFNoaXBzU3VuayB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuaW1wb3J0IHsgcGxheWVyIH0gZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHsgYm9hcmRzLCBwbGF5ZXJzIH0gZnJvbSAnLi9pbmRleCc7XG5cbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1tb2RhbCcpO1xuY29uc3Qgd2lubmVyTmFtZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lubmVyLW5hbWUtZGlzcGxheScpO1xuY29uc3QgdGl0bGVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUtY29udGFpbmVyJyk7XG5jb25zdCBnYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY29udGFpbmVyJyk7XG5jb25zdCBnYW1lSGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtaGVhZGVyJyk7XG5jb25zdCBwbGF5ZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci1uYW1lJyk7XG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLW5hbWUtaW5wdXQnKTtcbmNvbnN0IGNvbXB1dGVyQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjY29tcHV0ZXItZ2FtZWJvYXJkIC5jZWxsJyk7XG5cbmZ1bmN0aW9uIGRpc3BsYXlCb2FyZCgpIHtcbiAgdGl0bGVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZ2FtZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xuICBnYW1lSGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XG5cbiAgY29uc3QgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZSA9PSAnJyA/ICdZb3VyJzogbmFtZUlucHV0LnZhbHVlICsgJ1xcJ3MnXG4gIHBsYXllck5hbWUuaW5uZXJUZXh0ID0gYCR7bmFtZX0gQm9hcmRgXG59XG5cbmZvcihsZXQgY2VsbCBvZiBjb21wdXRlckNlbGxzKSB7XG4gIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYocGxheWVyc1swXS50dXJuKSB7XG4gICAgICBmaXJlKGNlbGwuZGF0YXNldC5jb29yZGluYXRlcywgYm9hcmRzWzFdKTtcbiAgICAgIGlmKGJvYXJkc1sxXS5jaGVja0FsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgIGRpc3BsYXlHYW1lT3ZlclNjcmVlbignQ29tcHV0ZXIgbG9zZXMuIFlvdSB3aW4hJyk7XG4gICAgICB9XG4gICAgICBwbGF5ZXJzWzBdLnR1cm4gPSBmYWxzZTtcblxuICAgICAgZmlyZShwbGF5ZXJzWzFdLm1ha2VNb3ZlKCksIGJvYXJkc1swXSk7XG4gICAgICBpZihib2FyZHNbMF0uY2hlY2tBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBkaXNwbGF5R2FtZU92ZXJTY3JlZW4oJ1lvdSBsb3NlLiBDb21wdXRlciB3aW5zLicpO1xuICAgICAgfVxuICAgICAgcGxheWVyc1swXS50dXJuID0gdHJ1ZTtcbiAgICB9XG5cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZpcmUoY29vcmRzLCBib2FyZCkge1xuICBjb25zdCBoaXQgPSBib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3Jkcyk7XG4gIGNoZWNrSGl0KGhpdCwgY29vcmRzLCBib2FyZClcbn1cblxuZnVuY3Rpb24gY2hlY2tIaXQoaGl0LCBjb29yZHMsIGJvYXJkKSB7XG4gIGxldCBjZWxsID0gbnVsbDtcbiAgaWYoYm9hcmQubmFtZSA9PT0gJ3BsYXllcicpIHtcbiAgICBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYXllci1nYW1lYm9hcmQgW2RhdGEtY29vcmRpbmF0ZXM9XCIke2Nvb3Jkc31cIl1gKTtcbiAgfSBlbHNlIHtcbiAgICBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NvbXB1dGVyLWdhbWVib2FyZCBbZGF0YS1jb29yZGluYXRlcz1cIiR7Y29vcmRzfVwiXWApO1xuICB9XG5cbiAgaWYoaGl0KSB7XG4gICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKTtcbiAgfSBlbHNlIHtcbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ21pc3MnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5R2FtZU92ZXJTY3JlZW4od2lubmVyKSB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB3aW5uZXJOYW1lRGlzcGxheS5pbm5lclRleHQgPSB3aW5uZXI7XG4gIGNvbnNvbGUubG9nKGJvYXJkcywgcGxheWVycylcbn1cblxuXG5leHBvcnQgeyBkaXNwbGF5Qm9hcmQgfSIsImltcG9ydCB7IHNoaXAgfSBmcm9tIFwiLi9zaGlwc1wiO1xuaW1wb3J0IHsgZ2FtZUJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBwbGF5ZXIgfSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgeyBkaXNwbGF5Qm9hcmQgfSBmcm9tICcuL0RPTSdcblxuY29uc3Qgc3RhcnRHYW1lQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LWdhbWUnKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1tb2RhbCcpO1xuY29uc3QgZ2FtZU92ZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1vdmVyLWJ0bicpO1xuY29uc3QgYm9hcmRzID0gW107XG5jb25zdCBwbGF5ZXJzID0gW11cblxuc3RhcnRHYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBkaXNwbGF5Qm9hcmQoKTtcbiAgY3JlYXRlUGxheWVycygpO1xuICBjcmVhdGVCb2FyZHMoKTtcbn0pO1xuXG5nYW1lT3ZlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICBmb3IobGV0IGNlbGwgb2YgY2VsbHMpIHtcbiAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7XG4gIH1cbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgYm9hcmRzLmxlbmd0aCA9IDA7XG4gIHBsYXllcnMubGVuZ3RoID0gMDtcbiAgY3JlYXRlUGxheWVycygpO1xuICBjcmVhdGVCb2FyZHMoKTtcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVQbGF5ZXJzKCkge1xuICBjb25zdCBodW1hblBsYXllciA9IHBsYXllcih0cnVlKTtcbiAgcGxheWVycy5wdXNoKGh1bWFuUGxheWVyKTtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBwbGF5ZXIoZmFsc2UpO1xuICBwbGF5ZXJzLnB1c2goY29tcHV0ZXJQbGF5ZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCb2FyZHMoKSB7XG4gIGNvbnN0IHBsYXllckJvYXJkID0gZ2FtZUJvYXJkKCdwbGF5ZXInKTtcbiAgcGxheWVyQm9hcmQucGxhY2VDYXJyaWVyKCdhMScsIGZhbHNlKTtcbiAgcGxheWVyQm9hcmQucGxhY2VCYXR0bGVzaGlwKCdiMScsIGZhbHNlKTtcbiAgcGxheWVyQm9hcmQucGxhY2VDcnVpc2VyKCdjMScsIGZhbHNlKTtcbiAgcGxheWVyQm9hcmQucGxhY2VTdWJtYXJpbmUoJ2QxJywgZmFsc2UpO1xuICBwbGF5ZXJCb2FyZC5wbGFjZURlc3Ryb3llcignZTEnLCBmYWxzZSk7XG4gIGJvYXJkcy5wdXNoKHBsYXllckJvYXJkKTtcblxuICBjb25zdCBjb21wdXRlckJvYXJkID0gZ2FtZUJvYXJkKCdjb21wdXRlcicpO1xuICBjb21wdXRlckJvYXJkLnBsYWNlQ2FycmllcignYTEnLCBmYWxzZSk7XG4gIGNvbXB1dGVyQm9hcmQucGxhY2VCYXR0bGVzaGlwKCdiMScsIGZhbHNlKTtcbiAgY29tcHV0ZXJCb2FyZC5wbGFjZUNydWlzZXIoJ2MxJywgZmFsc2UpO1xuICBjb21wdXRlckJvYXJkLnBsYWNlU3VibWFyaW5lKCdkMScsIGZhbHNlKTtcbiAgY29tcHV0ZXJCb2FyZC5wbGFjZURlc3Ryb3llcignZTEnLCBmYWxzZSk7XG4gIGJvYXJkcy5wdXNoKGNvbXB1dGVyQm9hcmQpO1xufVxuXG5leHBvcnQgeyBib2FyZHMsIHBsYXllcnMgfSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNoaXAiLCJuYW1lIiwibGVuZ3RoIiwic3VuayIsImhpdHMiLCJoaXQiLCJzaG93SGl0cyIsImlzU3VuayIsImdhbWVCb2FyZCIsImNvb3JkaW5hdGVzIiwiYTEiLCJhMiIsImEzIiwiYTQiLCJhNSIsImE2IiwiYTciLCJhOCIsImIxIiwiYjIiLCJiMyIsImI0IiwiYjUiLCJiNiIsImI3IiwiYjgiLCJjMSIsImMyIiwiYzMiLCJjNCIsImM1IiwiYzYiLCJjNyIsImM4IiwiZDEiLCJkMiIsImQzIiwiZDQiLCJkNSIsImQ2IiwiZDciLCJkOCIsImUxIiwiZTIiLCJlMyIsImU0IiwiZTUiLCJlNiIsImU3IiwiZTgiLCJmMSIsImYyIiwiZjMiLCJmNCIsImY1IiwiZjYiLCJmNyIsImY4IiwiZzEiLCJnMiIsImczIiwiZzQiLCJnNSIsImc2IiwiZzciLCJnOCIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsImg3IiwiaDgiLCJzaGlwcyIsInBsYWNlQ2FycmllciIsImNvb3JkcyIsInZlcnRpY2FsIiwiY2FycmllciIsImxldHRlciIsIm51bSIsInNwbGl0IiwiTnVtYmVyIiwiaSIsInB1c2giLCJjaGFyQ29kZUF0IiwibGV0dGVyQ2hhckNvZGUiLCJjb29yZExldHRlciIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInBsYWNlQmF0dGxlc2hpcCIsImJhdHRsZXNoaXAiLCJwbGFjZUNydWlzZXIiLCJjcnVpc2VyIiwicGxhY2VTdWJtYXJpbmUiLCJzdWJtYXJpbmUiLCJwbGFjZURlc3Ryb3llciIsImRlc3Ryb3llciIsInJlY2VpdmVBdHRhY2siLCJjaGVja0NlbGxDb250YWluc1NoaXAiLCJjaGVja0FsbFNoaXBzU3VuayIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwicGxheWVyIiwidHVybiIsIm1vdmVzTWFkZSIsImdlbmVyYXRlQ29vcmRpbmF0ZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImZsb29yIiwiY29uY2F0IiwibWFrZU1vdmUiLCJtb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aW5uZXJOYW1lRGlzcGxheSIsInRpdGxlQ29udGFpbmVyIiwiZ2FtZUNvbnRhaW5lciIsImdhbWVIZWFkZXIiLCJwbGF5ZXJOYW1lIiwibmFtZUlucHV0IiwiY29tcHV0ZXJDZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjZWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXllcnMiLCJmaXJlIiwiZGF0YXNldCIsImJvYXJkcyIsImRpc3BsYXlHYW1lT3ZlclNjcmVlbiIsImJvYXJkIiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsImNoZWNrSGl0Iiwid2lubmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5uZXJUZXh0IiwiY29uc29sZSIsImxvZyIsInN0YXJ0R2FtZUJ0biIsImdhbWVPdmVyQnRuIiwiY3JlYXRlUGxheWVycyIsImh1bWFuUGxheWVyIiwiY29tcHV0ZXJQbGF5ZXIiLCJjcmVhdGVCb2FyZHMiLCJwbGF5ZXJCb2FyZCIsImNvbXB1dGVyQm9hcmQiLCJ2YWx1ZSIsImRpc3BsYXlCb2FyZCIsImNlbGxzIiwiYmFja2dyb3VuZENvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==