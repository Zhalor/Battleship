(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){let n=0,a=0;return{name:e,hit:()=>{++a,a===t&&++n},length:t,showHits:()=>a,isSunk:()=>n}}e.d({},{t:()=>N,F:()=>$});const n=document.getElementById("game-over-modal"),a=document.getElementById("winner-name-display"),r=document.getElementById("title-container"),s=document.getElementById("game-container"),l=document.getElementById("game-header"),o=document.getElementById("player-name"),i=document.getElementById("enemy-name"),c=document.getElementById("player-name-input"),d=document.getElementById("ship-placement-container"),m=document.getElementById("place-ship-header"),u=document.getElementById("ship-name"),p=document.getElementById("ship-placement-input"),y=document.getElementById("place-ship-btn"),h=document.getElementById("rotate-btn"),g=document.getElementById("start-round-btn"),f=document.getElementById("computer-gameboard"),b=document.querySelectorAll("#computer-gameboard .cell");function B(){r.style.display="none",s.style.display="grid",l.style.display="grid",f.style.display="none",d.style.display="flex",y.style.display="inline",h.style.display="inline",g.style.display="none";const e=""==c.value?"Your":c.value+"'s";o.innerText=`${e} Board`,u.innerText="Carrier"}for(let e of b)e.addEventListener("click",(()=>{["hit","miss"].some((t=>e.classList.contains(t)))||$[0].turn&&(E(e.dataset.coordinates,N[1]),N[1].checkAllShipsSunk()&&I("Computer loses. You win!"),$[0].turn=!1,E($[1].makeMove(),N[0]),N[0].checkAllShipsSunk()&&I("You lose. Computer wins."),$[0].turn=!0)}));function E(e,t){!function(e,t,n){let a=null;a="player"===n.name?document.querySelector(`#player-gameboard [data-coordinates="${t}"]`):document.querySelector(`#computer-gameboard [data-coordinates="${t}"]`),e?a.classList.add("hit"):a.classList.add("miss")}(t.receiveAttack(e),e,t)}function I(e){n.style.display="block",a.innerText=e}const S=document.getElementById("ship-name");function k(e){const n={a1:"",a2:"",a3:"",a4:"",a5:"",a6:"",a7:"",a8:"",b1:"",b2:"",b3:"",b4:"",b5:"",b6:"",b7:"",b8:"",c1:"",c2:"",c3:"",c4:"",c5:"",c6:"",c7:"",c8:"",d1:"",d2:"",d3:"",d4:"",d5:"",d6:"",d7:"",d8:"",e1:"",e2:"",e3:"",e4:"",e5:"",e6:"",e7:"",e8:"",f1:"",f2:"",f3:"",f4:"",f5:"",f6:"",f7:"",f8:"",g1:"",g2:"",g3:"",g4:"",g5:"",g6:"",g7:"",g8:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:"",h7:"",h8:""},a=["Carrier","Battleship","Cruiser","Submarine","Destroyer"],r=[];let s=0;function l(e,t,l,o,i,c){if(!1===i){if(o+e.length<10){const i=function(e,t,a){const r=[];for(let s=t;s<t+e;s++){if(n[a+s])return!1;r.push(a+s)}return r}(e.length,o,l);if(0!=i){for(let e of i)n[e]=t,1==c&&(document.querySelector(`[data-coordinates="${e}"]`).classList.add("ship"),S.innerText=a[s+1]);r.push(e),s++,document.getElementById("ship-placement-input").classList.remove("error")}else document.getElementById("ship-placement-input").classList.add("error")}}else if(!0===i&&l.charCodeAt()+e.length<106){const i=function(e,t,a){const r=[];for(let s=t;s<t+e;s++){let e=String.fromCharCode(s);if(n[e+a])return!1;r.push(e+a)}return r}(e.length,l.charCodeAt(),o);if(0!=i){for(let e of i)n[e]=t,1==c&&(document.querySelector(`[data-coordinates="${e}"]`).classList.add("ship"),S.innerText=a[s+1]);r.push(e),s++,document.getElementById("ship-placement-input").classList.remove("error")}else document.getElementById("ship-placement-input").classList.add("error")}}return{coordinates:n,ships:r,name:e,placeCarrier:(e,n,a)=>{const r=t("carrier",5);let[s,o]=e.split("");o=Number(o),s<"i"&&/[a-z]/.test(s)&&l(r,"carrier",s,o,n,a)},placeBattleship:(e,n,a)=>{const r=t("battleship",4);let[s,o]=e.split("");o=Number(o),s<"i"&&/[a-z]/.test(s)&&l(r,"battleship",s,o,n,a)},placeCruiser:(e,n,a)=>{const r=t("cruiser",3);let[s,o]=e.split("");o=Number(o),s<"i"&&/[a-z]/.test(s)&&l(r,"cruiser",s,o,n,a)},placeSubmarine:(e,n,a)=>{const r=t("submarine",3);let[s,o]=e.split("");o=Number(o),s<"i"&&/[a-z]/.test(s)&&l(r,"submarine",s,o,n,a)},placeDestroyer:(e,n,a)=>{const r=t("destroyer",2);let[o,i]=e.split("");i=Number(i),o<"i"&&/[a-z]/.test(o)&&l(r,"destroyer",o,i,n,a),5===s&&(y.style.display="none",h.style.display="none",u.style.display="none",p.style.display="none",g.style.display="inline",m.innerText="Prepare For Battle!")},receiveAttack:e=>n[e]?((e=>{switch(e){case"carrier":r[0].hit();break;case"battleship":r[1].hit();break;case"cruiser":r[2].hit();break;case"submarine":r[3].hit();break;case"destroyer":r[4].hit()}})(n[e]),!0):(n[e]="miss",!1),checkAllShipsSunk:()=>{if(5===r.reduce(((e,t)=>e+t.isSunk()),0))return!0},getShipsPlaced:()=>s}}const v=e=>{const t={},n=()=>{let e=String.fromCharCode(String(Math.round(7*Math.random()+97))),t=String(Math.floor(8*Math.random())+1);return e.concat(t)};return{turn:e,makeMove:()=>{let e=n();for(;e in t;)e=n();return t[e]=!0,e},generateCoordinate:n,generateBoolean:()=>1==Math.floor(2*Math.random())}},C=document.getElementById("start-game"),L=document.getElementById("game-over-modal"),x=document.getElementById("game-over-btn"),P=document.getElementById("ship-placement-input"),T=document.getElementById("rotate-btn"),w=document.getElementById("start-round-btn"),A=document.getElementById("place-ship-btn"),M=document.getElementById("enemy-name"),q=document.getElementById("place-ship-header"),z=document.getElementById("ship-name"),N=[],$=[];let D=!1;function Y(){const e=v(!0),t=v(!1);$.push(e),$.push(t)}function O(){const e=k("player"),t=k("computer");N.push(e),N.push(t)}C.addEventListener("click",(()=>{B(),Y(),O(),P.focus()})),A.addEventListener("click",(()=>{!function(){switch(N[0].getShipsPlaced()){case 0:N[0].placeCarrier(P.value,D,!0),D=!1;break;case 1:N[0].placeBattleship(P.value,D,!0),D=!1;break;case 2:N[0].placeCruiser(P.value,D,!0),D=!1;break;case 3:N[0].placeSubmarine(P.value,D,!0),D=!1;break;case 4:N[0].placeDestroyer(P.value,D,!0),D=!1}}(),P.value="",P.focus(),T.classList.remove("scale-down")})),T.addEventListener("click",(()=>{D=0==D,T.classList.add("scale-down")})),w.addEventListener("click",(()=>{for(;N[1].getShipsPlaced()<1;)N[1].placeCarrier($[1].generateCoordinate(),$[1].generateBoolean());for(;N[1].getShipsPlaced()<2;)N[1].placeBattleship($[1].generateCoordinate(),$[1].generateBoolean());for(;N[1].getShipsPlaced()<3;)N[1].placeCruiser($[1].generateCoordinate(),$[1].generateBoolean());for(;N[1].getShipsPlaced()<4;)N[1].placeSubmarine($[1].generateCoordinate(),$[1].generateBoolean());for(;N[1].getShipsPlaced()<5;)N[1].placeDestroyer($[1].generateCoordinate(),$[1].generateBoolean());d.style.display="none",f.style.display="block",i.innerText="Enemy's Board"})),x.addEventListener("click",(()=>{const e=document.querySelectorAll(".cell");for(let t of e)t.classList.remove("hit","miss","ship");L.style.display="none",P.style.display="inline",M.innerText="Type in your coordinates to place a ship",q.innerText="Place Your Ships",z.innerText="Carrier",N.length=0,$.length=0,Y(),O(),B()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0gsaUJBQW1CLEdBQ2pDdEgsRUFBTyxHQUFHNEcsYUFBYWpILEVBQVEsR0FBRzhILHFCQUFzQjlILEVBQVEsR0FBR29JLG1CQUVyRSxLQUFNL0gsRUFBTyxHQUFHc0gsaUJBQW1CLEdBQ2pDdEgsRUFBTyxHQUFHOEcsZUFBZW5ILEVBQVEsR0FBRzhILHFCQUFzQjlILEVBQVEsR0FBR29JLG1CQUV2RSxLQUFNL0gsRUFBTyxHQUFHc0gsaUJBQW1CLEdBQ2pDdEgsRUFBTyxHQUFHZ0gsZUFBZXJILEVBQVEsR0FBRzhILHFCQUFzQjlILEVBQVEsR0FBR29JLG1CSG1DdkV6SixFQUF1QlcsTUFBTUMsUUFBVSxPQUN2Q0wsRUFBa0JJLE1BQU1DLFFBQVUsUUFDbENkLEVBQVVnQixVQUFZLGVHbkNJLElBRzVCNkksRUFBWTNJLGlCQUFpQixTQUFTLEtBQ3BDLE1BQU1tSixFQUFRNUssU0FBU2tCLGlCQUFpQixTQUN4QyxJQUFJLElBQUlNLEtBQVFvSixFQUNkcEosRUFBS0ksVUFBVXFHLE9BQU8sTUFBTyxPQUFRLFFBRXZDLEVBQU03RyxNQUFNQyxRQUFVLE9BQ3RCLEVBQW1CRCxNQUFNQyxRQUFVLFNBQ25DLEVBQVVFLFVBQVksMkNBQ3RCLEVBQWdCQSxVQUFZLG1CQUM1QixFQUFTQSxVQUFZLFVBRXJCWSxFQUFPMUMsT0FBUyxFQUNoQnFDLEVBQVFyQyxPQUFTLEVBQ2pCNEssSUFDQUcsSUFDQXJKLEdBQWMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9ET00uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImZ1bmN0aW9uIHNoaXAobmFtZSwgbGVuZ3RoKSB7XG4gIGxldCBzdW5rID0gMDtcbiAgbGV0IGhpdHMgPSAwO1xuXG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICArK2hpdHM7XG4gICAgaWYoaGl0cyA9PT0gbGVuZ3RoKSB7XG4gICAgICArK3N1bms7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNob3dIaXRzID0gKCkgPT4gaGl0cztcblxuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdW5rO1xuXG4gIHJldHVybiB7IG5hbWUsIGhpdCwgbGVuZ3RoLCBzaG93SGl0cywgaXNTdW5rIH07XG59XG5cbmV4cG9ydCB7IHNoaXAgfTsiLCJpbXBvcnQgeyBib2FyZHMsIHBsYXllcnMgfSBmcm9tICcuL2luZGV4JztcblxuY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1vdmVyLW1vZGFsJyk7XG5jb25zdCB3aW5uZXJOYW1lRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5uZXItbmFtZS1kaXNwbGF5Jyk7XG5jb25zdCB0aXRsZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZS1jb250YWluZXInKTtcbmNvbnN0IGdhbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jb250YWluZXInKTtcbmNvbnN0IGdhbWVIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1oZWFkZXInKTtcbmNvbnN0IHBsYXllck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLW5hbWUnKTtcbmNvbnN0IGVuZW15TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmVteS1uYW1lJyk7XG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLW5hbWUtaW5wdXQnKTtcbmNvbnN0IHNoaXBQbGFjZW1lbnRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1wbGFjZW1lbnQtY29udGFpbmVyJyk7XG5jb25zdCBwbGFjZVNoaXBIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxhY2Utc2hpcC1oZWFkZXInKTtcbmNvbnN0IHNoaXBOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaXAtbmFtZScpO1xuY29uc3Qgc2hpcFBsYWNlbWVudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaXAtcGxhY2VtZW50LWlucHV0Jyk7XG5jb25zdCBwbGFjZVNoaXBCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxhY2Utc2hpcC1idG4nKTtcbmNvbnN0IHJvdGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3RhdGUtYnRuJyk7XG5jb25zdCBzdGFydFJvdW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LXJvdW5kLWJ0bicpO1xuY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcHV0ZXItZ2FtZWJvYXJkJyk7XG5jb25zdCBjb21wdXRlckNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2NvbXB1dGVyLWdhbWVib2FyZCAuY2VsbCcpO1xuXG5cbmZ1bmN0aW9uIGRpc3BsYXlCb2FyZCgpIHtcbiAgdGl0bGVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZ2FtZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xuICBnYW1lSGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XG4gIGNvbXB1dGVyR2FtZWJvYXJkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHNoaXBQbGFjZW1lbnRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgcGxhY2VTaGlwQnRuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgcm90YXRlQnRuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgc3RhcnRSb3VuZEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gIGNvbnN0IG5hbWUgPSBuYW1lSW5wdXQudmFsdWUgPT0gJycgPyAnWW91cic6IG5hbWVJbnB1dC52YWx1ZSArICdcXCdzJ1xuICBwbGF5ZXJOYW1lLmlubmVyVGV4dCA9IGAke25hbWV9IEJvYXJkYFxuICBzaGlwTmFtZS5pbm5lclRleHQgPSAnQ2Fycmllcic7XG59XG5cbmZvcihsZXQgY2VsbCBvZiBjb21wdXRlckNlbGxzKSB7XG4gIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFsnaGl0JywgJ21pc3MnXTtcbiAgICBpZighY2xhc3NOYW1lcy5zb21lKGNsYXNzTmFtZSA9PiBjZWxsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSkge1xuICAgICAgaWYocGxheWVyc1swXS50dXJuKSB7XG4gICAgICAgIGZpcmUoY2VsbC5kYXRhc2V0LmNvb3JkaW5hdGVzLCBib2FyZHNbMV0pO1xuICAgICAgICBpZihib2FyZHNbMV0uY2hlY2tBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICAgIGRpc3BsYXlHYW1lT3ZlclNjcmVlbignQ29tcHV0ZXIgbG9zZXMuIFlvdSB3aW4hJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGxheWVyc1swXS50dXJuID0gZmFsc2U7XG4gIFxuICAgICAgICBmaXJlKHBsYXllcnNbMV0ubWFrZU1vdmUoKSwgYm9hcmRzWzBdKTtcbiAgICAgICAgaWYoYm9hcmRzWzBdLmNoZWNrQWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgICBkaXNwbGF5R2FtZU92ZXJTY3JlZW4oJ1lvdSBsb3NlLiBDb21wdXRlciB3aW5zLicpO1xuICAgICAgICB9XG4gICAgICAgIHBsYXllcnNbMF0udHVybiA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZmlyZShjb29yZHMsIGJvYXJkKSB7XG4gIGNvbnN0IGhpdCA9IGJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRzKTtcbiAgY2hlY2tIaXQoaGl0LCBjb29yZHMsIGJvYXJkKVxufVxuXG5mdW5jdGlvbiBjaGVja0hpdChoaXQsIGNvb3JkcywgYm9hcmQpIHtcbiAgbGV0IGNlbGwgPSBudWxsO1xuICBpZihib2FyZC5uYW1lID09PSAncGxheWVyJykge1xuICAgIGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcGxheWVyLWdhbWVib2FyZCBbZGF0YS1jb29yZGluYXRlcz1cIiR7Y29vcmRzfVwiXWApO1xuICB9IGVsc2Uge1xuICAgIGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY29tcHV0ZXItZ2FtZWJvYXJkIFtkYXRhLWNvb3JkaW5hdGVzPVwiJHtjb29yZHN9XCJdYCk7XG4gIH1cblxuICBpZihoaXQpIHtcbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpdCcpO1xuICB9IGVsc2Uge1xuICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWlzcycpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlTdGFydE1hdGNoQnRuKCkge1xuICBwbGFjZVNoaXBCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgcm90YXRlQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHNoaXBOYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHNoaXBQbGFjZW1lbnRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBzdGFydFJvdW5kQnRuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgcGxhY2VTaGlwSGVhZGVyLmlubmVyVGV4dCA9ICdQcmVwYXJlIEZvciBCYXR0bGUhJztcbn1cblxuZnVuY3Rpb24gZGlzcGxheUNvbXB1dGVyR2FtZWJvYXJkKCkge1xuICBzaGlwUGxhY2VtZW50Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGNvbXB1dGVyR2FtZWJvYXJkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBlbmVteU5hbWUuaW5uZXJUZXh0ID0gJ0VuZW15XFwncyBCb2FyZCdcbn1cblxuZnVuY3Rpb24gZGlzcGxheUdhbWVPdmVyU2NyZWVuKHdpbm5lcikge1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgd2lubmVyTmFtZURpc3BsYXkuaW5uZXJUZXh0ID0gd2lubmVyO1xufVxuXG5cbmV4cG9ydCB7IGRpc3BsYXlCb2FyZCwgZGlzcGxheVN0YXJ0TWF0Y2hCdG4sIGRpc3BsYXlDb21wdXRlckdhbWVib2FyZCB9IiwiaW1wb3J0IHsgc2hpcCB9IGZyb20gXCIuL3NoaXBzXCI7XG5pbXBvcnQgeyBkaXNwbGF5U3RhcnRNYXRjaEJ0biB9IGZyb20gXCIuL0RPTVwiO1xuXG5jb25zdCBzaGlwTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGlwLW5hbWUnKTtcblxuZnVuY3Rpb24gZ2FtZUJvYXJkKG5hbWUpIHtcbiAgY29uc3QgY29vcmRpbmF0ZXMgPSB7XG4gICAgYTE6ICcnLFxuICAgIGEyOiAnJyxcbiAgICBhMzogJycsXG4gICAgYTQ6ICcnLFxuICAgIGE1OiAnJyxcbiAgICBhNjogJycsXG4gICAgYTc6ICcnLFxuICAgIGE4OiAnJyxcbiAgICBiMTogJycsXG4gICAgYjI6ICcnLFxuICAgIGIzOiAnJyxcbiAgICBiNDogJycsXG4gICAgYjU6ICcnLFxuICAgIGI2OiAnJyxcbiAgICBiNzogJycsXG4gICAgYjg6ICcnLFxuICAgIGMxOiAnJyxcbiAgICBjMjogJycsXG4gICAgYzM6ICcnLFxuICAgIGM0OiAnJyxcbiAgICBjNTogJycsXG4gICAgYzY6ICcnLFxuICAgIGM3OiAnJyxcbiAgICBjODogJycsXG4gICAgZDE6ICcnLFxuICAgIGQyOiAnJyxcbiAgICBkMzogJycsXG4gICAgZDQ6ICcnLFxuICAgIGQ1OiAnJyxcbiAgICBkNjogJycsXG4gICAgZDc6ICcnLFxuICAgIGQ4OiAnJyxcbiAgICBlMTogJycsXG4gICAgZTI6ICcnLFxuICAgIGUzOiAnJyxcbiAgICBlNDogJycsXG4gICAgZTU6ICcnLFxuICAgIGU2OiAnJyxcbiAgICBlNzogJycsXG4gICAgZTg6ICcnLFxuICAgIGYxOiAnJyxcbiAgICBmMjogJycsXG4gICAgZjM6ICcnLFxuICAgIGY0OiAnJyxcbiAgICBmNTogJycsXG4gICAgZjY6ICcnLFxuICAgIGY3OiAnJyxcbiAgICBmODogJycsXG4gICAgZzE6ICcnLFxuICAgIGcyOiAnJyxcbiAgICBnMzogJycsXG4gICAgZzQ6ICcnLFxuICAgIGc1OiAnJyxcbiAgICBnNjogJycsXG4gICAgZzc6ICcnLFxuICAgIGc4OiAnJyxcbiAgICBoMTogJycsXG4gICAgaDI6ICcnLFxuICAgIGgzOiAnJyxcbiAgICBoNDogJycsXG4gICAgaDU6ICcnLFxuICAgIGg2OiAnJyxcbiAgICBoNzogJycsXG4gICAgaDg6ICcnLFxuICB9XG5cbiAgY29uc3Qgc2hpcE5hbWVzID0gWydDYXJyaWVyJywgJ0JhdHRsZXNoaXAnLCAnQ3J1aXNlcicsICdTdWJtYXJpbmUnLCAnRGVzdHJveWVyJ107XG5cbiAgY29uc3Qgc2hpcHMgPSBbXTtcbiAgbGV0IHNoaXBzUGxhY2VkID0gMDtcblxuICBjb25zdCBnZXRTaGlwc1BsYWNlZCA9ICgpID0+IHtcbiAgICByZXR1cm4gc2hpcHNQbGFjZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0NlbGxBdmFpbGFibGl0eUhvcml6b250YWwoc2hpcExlbmd0aCwgY29vcmROdW0sIGxldHRlcikge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvcihsZXQgaSA9IGNvb3JkTnVtOyBpIDwgY29vcmROdW0gKyBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKGNvb3JkaW5hdGVzW2xldHRlciArIGldKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyci5wdXNoKGxldHRlciArIGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tDZWxsQXZhaWxhYmxpdHlWZXJ0aWNhbChzaGlwTGVuZ3RoLCBsZXR0ZXJDaGFyQ29kZSwgbnVtICkge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvcihsZXQgaSA9IGxldHRlckNoYXJDb2RlOyBpIDwgbGV0dGVyQ2hhckNvZGUgKyBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjb29yZExldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XG4gICAgICBpZihjb29yZGluYXRlc1tjb29yZExldHRlciArIG51bV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJyLnB1c2goY29vcmRMZXR0ZXIgKyBudW0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxhY2VTaGlwKHNoaXBPYmosIHNoaXBTdHJpbmcsIGxldHRlciwgbnVtLCB2ZXJ0aWNhbCwgRE9NKSB7XG4gICAgaWYodmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICBpZigobnVtICsgc2hpcE9iai5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgY29uc3QgcGxhY2VDb29yZGluYXRlcyA9IGNoZWNrQ2VsbEF2YWlsYWJsaXR5SG9yaXpvbnRhbChzaGlwT2JqLmxlbmd0aCwgbnVtLCBsZXR0ZXIpO1xuICAgICAgICBpZihwbGFjZUNvb3JkaW5hdGVzICE9IGZhbHNlKSB7XG4gICAgICAgICAgZm9yKGxldCBjb29yZGluYXRlIG9mIHBsYWNlQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVdID0gc2hpcFN0cmluZztcbiAgICAgICAgICAgIGlmKERPTSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvb3JkaW5hdGVzPVwiJHtjb29yZGluYXRlfVwiXWApLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKTtcbiAgICAgICAgICAgICAgc2hpcE5hbWUuaW5uZXJUZXh0ID0gc2hpcE5hbWVzW3NoaXBzUGxhY2VkICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHNoaXBzLnB1c2goc2hpcE9iaik7XG4gICAgICAgICAgc2hpcHNQbGFjZWQrKztcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1wbGFjZW1lbnQtaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGlwLXBsYWNlbWVudC1pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgIGlmKGxldHRlci5jaGFyQ29kZUF0KCkgKyBzaGlwT2JqLmxlbmd0aCA8IDEwNikge1xuICAgICAgICBjb25zdCBwbGFjZUNvb3JkaW5hdGVzID0gY2hlY2tDZWxsQXZhaWxhYmxpdHlWZXJ0aWNhbChzaGlwT2JqLmxlbmd0aCwgbGV0dGVyLmNoYXJDb2RlQXQoKSwgbnVtKTtcbiAgICAgICAgaWYocGxhY2VDb29yZGluYXRlcyAhPSBmYWxzZSkge1xuICAgICAgICAgIGZvcihsZXQgY29vcmRpbmF0ZSBvZiBwbGFjZUNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlc1tjb29yZGluYXRlXSA9IHNoaXBTdHJpbmc7XG4gICAgICAgICAgICBpZihET00gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb29yZGluYXRlcz1cIiR7Y29vcmRpbmF0ZX1cIl1gKS5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XG4gICAgICAgICAgICAgIHNoaXBOYW1lLmlubmVyVGV4dCA9IHNoaXBOYW1lc1tzaGlwc1BsYWNlZCArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaGlwcy5wdXNoKHNoaXBPYmopO1xuICAgICAgICAgIHNoaXBzUGxhY2VkKys7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaXAtcGxhY2VtZW50LWlucHV0JykuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1wbGFjZW1lbnQtaW5wdXQnKS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGxhY2VDYXJyaWVyID0gKGNvb3JkcywgdmVydGljYWwsIERPTSkgPT4ge1xuICAgIGNvbnN0IGNhcnJpZXIgPSBzaGlwKCdjYXJyaWVyJywgNSk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuICAgIGlmKGxldHRlciA8ICdpJyAmJiAvW2Etel0vLnRlc3QobGV0dGVyKSkge1xuICAgICAgcGxhY2VTaGlwKGNhcnJpZXIsICdjYXJyaWVyJywgbGV0dGVyLCBudW0sIHZlcnRpY2FsLCBET00pO1xuICAgIH1cbiAgfVxuICBcbiAgY29uc3QgcGxhY2VCYXR0bGVzaGlwID0gKGNvb3JkcywgdmVydGljYWwsIERPTSkgPT4ge1xuICAgIGNvbnN0IGJhdHRsZXNoaXAgPSBzaGlwKCdiYXR0bGVzaGlwJywgNCk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuICAgIGlmKGxldHRlciA8ICdpJyAmJiAvW2Etel0vLnRlc3QobGV0dGVyKSkge1xuICAgICAgcGxhY2VTaGlwKGJhdHRsZXNoaXAsICdiYXR0bGVzaGlwJywgbGV0dGVyLCBudW0sIHZlcnRpY2FsLCBET00pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHBsYWNlQ3J1aXNlciA9IChjb29yZHMsIHZlcnRpY2FsLCBET00pID0+IHtcbiAgICBjb25zdCBjcnVpc2VyID0gc2hpcCgnY3J1aXNlcicsIDMpO1xuICAgIGxldCBbbGV0dGVyLCBudW1dID0gY29vcmRzLnNwbGl0KCcnKTtcbiAgICBudW0gPSBOdW1iZXIobnVtKTtcbiAgICBpZihsZXR0ZXIgPCAnaScgJiYgL1thLXpdLy50ZXN0KGxldHRlcikpIHtcbiAgICAgIHBsYWNlU2hpcChjcnVpc2VyLCAnY3J1aXNlcicsIGxldHRlciwgbnVtLCB2ZXJ0aWNhbCwgRE9NKTsgXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGxhY2VTdWJtYXJpbmUgPSAoY29vcmRzLCB2ZXJ0aWNhbCwgRE9NKSA9PiB7XG4gICAgY29uc3Qgc3VibWFyaW5lID0gc2hpcCgnc3VibWFyaW5lJywgMyk7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuICAgIGlmKGxldHRlciA8ICdpJyAmJiAvW2Etel0vLnRlc3QobGV0dGVyKSkge1xuICAgICAgcGxhY2VTaGlwKHN1Ym1hcmluZSwgJ3N1Ym1hcmluZScsIGxldHRlciwgbnVtLCB2ZXJ0aWNhbCwgRE9NKTsgXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGxhY2VEZXN0cm95ZXIgPSAoY29vcmRzLCB2ZXJ0aWNhbCwgRE9NKSA9PiB7XG4gICAgY29uc3QgZGVzdHJveWVyID0gc2hpcCgnZGVzdHJveWVyJywgMik7XG4gICAgbGV0IFtsZXR0ZXIsIG51bV0gPSBjb29yZHMuc3BsaXQoJycpO1xuICAgIG51bSA9IE51bWJlcihudW0pO1xuICAgIGlmKGxldHRlciA8ICdpJyAmJiAvW2Etel0vLnRlc3QobGV0dGVyKSkge1xuICAgICAgcGxhY2VTaGlwKGRlc3Ryb3llciwgJ2Rlc3Ryb3llcicsIGxldHRlciwgbnVtLCB2ZXJ0aWNhbCwgRE9NKTtcbiAgICB9XG4gICAgaWYgKHNoaXBzUGxhY2VkID09PSA1KSB7XG4gICAgICBkaXNwbGF5U3RhcnRNYXRjaEJ0bigpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRzKSA9PiB7XG4gICAgaWYoY29vcmRpbmF0ZXNbY29vcmRzXSkge1xuICAgICAgY2hlY2tDZWxsQ29udGFpbnNTaGlwKGNvb3JkaW5hdGVzW2Nvb3Jkc10pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvb3JkaW5hdGVzW2Nvb3Jkc10gPSAnbWlzcyc7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2hlY2tDZWxsQ29udGFpbnNTaGlwID0gKGNvb3JkcykgPT4ge1xuICAgIHN3aXRjaCAoY29vcmRzKSB7XG4gICAgICBjYXNlICdjYXJyaWVyJzpcbiAgICAgICAgc2hpcHNbMF0uaGl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmF0dGxlc2hpcCc6XG4gICAgICAgIHNoaXBzWzFdLmhpdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NydWlzZXInOlxuICAgICAgICBzaGlwc1syXS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdWJtYXJpbmUnOlxuICAgICAgICBzaGlwc1szXS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZXN0cm95ZXInOlxuICAgICAgICBzaGlwc1s0XS5oaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2hlY2tBbGxTaGlwc1N1bmsgPSAoKSA9PiB7XG4gICAgbGV0IGNvdW50ID0gc2hpcHMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBwcmV2ICsgY3Vyci5pc1N1bmsoKSwgMCk7XG4gICAgaWYoY291bnQgPT09IDUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IGNvb3JkaW5hdGVzLCBzaGlwcywgbmFtZSwgcGxhY2VDYXJyaWVyLCBwbGFjZUJhdHRsZXNoaXAsIHBsYWNlQ3J1aXNlciwgcGxhY2VTdWJtYXJpbmUsIHBsYWNlRGVzdHJveWVyLFxuICAgIHJlY2VpdmVBdHRhY2ssIGNoZWNrQWxsU2hpcHNTdW5rLCBnZXRTaGlwc1BsYWNlZCB9O1xufVxuXG5leHBvcnQgeyBnYW1lQm9hcmQgfTsiLCJjb25zdCBwbGF5ZXIgPSAodHVybikgPT4ge1xuICBjb25zdCBtb3Zlc01hZGUgPSB7fTtcblxuICBjb25zdCBtYWtlTW92ZSA9ICgpID0+IHtcbiAgICBsZXQgY29vcmRzID0gZ2VuZXJhdGVDb29yZGluYXRlKCk7XG4gICAgd2hpbGUoY29vcmRzIGluIG1vdmVzTWFkZSl7XG4gICAgICBjb29yZHMgPSBnZW5lcmF0ZUNvb3JkaW5hdGUoKTtcbiAgICB9XG4gICAgbW92ZXNNYWRlW2Nvb3Jkc10gPSB0cnVlO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICBjb25zdCBnZW5lcmF0ZUNvb3JkaW5hdGUgPSAoKSA9PiB7XG4gICAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoU3RyaW5nKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDQgLSA5NykgKyA5NykpKTtcbiAgICBsZXQgbnVtID0gU3RyaW5nKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpICsgMSk7XG4gICAgcmV0dXJuIGxldHRlci5jb25jYXQobnVtKTtcbiAgfVxuXG4gIGNvbnN0IGdlbmVyYXRlQm9vbGVhbiA9ICgpID0+IHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgPT0gMSA/IHRydWUgOiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB7IHR1cm4sIG1ha2VNb3ZlLCBnZW5lcmF0ZUNvb3JkaW5hdGUsIGdlbmVyYXRlQm9vbGVhbiB9XG59XG5cbmV4cG9ydCB7IHBsYXllciB9OyIsImltcG9ydCB7IGdhbWVCb2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuaW1wb3J0IHsgcGxheWVyIH0gZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHsgZGlzcGxheUJvYXJkLCBkaXNwbGF5Q29tcHV0ZXJHYW1lYm9hcmQgfSBmcm9tICcuL0RPTSdcblxuY29uc3Qgc3RhcnRHYW1lQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LWdhbWUnKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1tb2RhbCcpO1xuY29uc3QgZ2FtZU92ZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1vdmVyLWJ0bicpO1xuY29uc3Qgc2hpcFBsYWNlbWVudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaXAtcGxhY2VtZW50LWlucHV0Jyk7XG5jb25zdCByb3RhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm90YXRlLWJ0bicpO1xuY29uc3Qgc3RhcnRSb3VuZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1yb3VuZC1idG4nKTtcbmNvbnN0IHBsYWNlU2hpcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGFjZS1zaGlwLWJ0bicpO1xuY29uc3QgZW5lbXlOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZW15LW5hbWUnKTtcbmNvbnN0IHBsYWNlU2hpcEhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGFjZS1zaGlwLWhlYWRlcicpO1xuY29uc3Qgc2hpcE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcC1uYW1lJyk7XG5cbmNvbnN0IGJvYXJkcyA9IFtdO1xuY29uc3QgcGxheWVycyA9IFtdXG5sZXQgdmVydGljYWwgPSBmYWxzZTtcblxuc3RhcnRHYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBkaXNwbGF5Qm9hcmQoKTtcbiAgY3JlYXRlUGxheWVycygpO1xuICBjcmVhdGVCb2FyZHMoKTtcbiAgc2hpcFBsYWNlbWVudElucHV0LmZvY3VzKCk7XG59KTtcblxucGxhY2VTaGlwQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwbGFjZVNoaXAoKTtcbiAgc2hpcFBsYWNlbWVudElucHV0LnZhbHVlID0gJyc7XG4gIHNoaXBQbGFjZW1lbnRJbnB1dC5mb2N1cygpO1xuICByb3RhdGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2NhbGUtZG93bicpO1xufSk7XG5cbnJvdGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdmVydGljYWwgPSB2ZXJ0aWNhbCA9PSBmYWxzZSA/IHRydWUgOiBmYWxzZTtcbiAgcm90YXRlQnRuLmNsYXNzTGlzdC5hZGQoJ3NjYWxlLWRvd24nKTtcbn0pO1xuXG5zdGFydFJvdW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB3aGlsZShib2FyZHNbMV0uZ2V0U2hpcHNQbGFjZWQoKSA8IDEpIHtcbiAgICBib2FyZHNbMV0ucGxhY2VDYXJyaWVyKHBsYXllcnNbMV0uZ2VuZXJhdGVDb29yZGluYXRlKCksIHBsYXllcnNbMV0uZ2VuZXJhdGVCb29sZWFuKCkpO1xuICB9XG4gIHdoaWxlKGJvYXJkc1sxXS5nZXRTaGlwc1BsYWNlZCgpIDwgMikge1xuICAgIGJvYXJkc1sxXS5wbGFjZUJhdHRsZXNoaXAocGxheWVyc1sxXS5nZW5lcmF0ZUNvb3JkaW5hdGUoKSwgcGxheWVyc1sxXS5nZW5lcmF0ZUJvb2xlYW4oKSk7XG4gIH1cbiAgd2hpbGUoYm9hcmRzWzFdLmdldFNoaXBzUGxhY2VkKCkgPCAzKSB7XG4gICAgYm9hcmRzWzFdLnBsYWNlQ3J1aXNlcihwbGF5ZXJzWzFdLmdlbmVyYXRlQ29vcmRpbmF0ZSgpLCBwbGF5ZXJzWzFdLmdlbmVyYXRlQm9vbGVhbigpKTtcbiAgfVxuICB3aGlsZShib2FyZHNbMV0uZ2V0U2hpcHNQbGFjZWQoKSA8IDQpIHtcbiAgICBib2FyZHNbMV0ucGxhY2VTdWJtYXJpbmUocGxheWVyc1sxXS5nZW5lcmF0ZUNvb3JkaW5hdGUoKSwgcGxheWVyc1sxXS5nZW5lcmF0ZUJvb2xlYW4oKSk7XG4gIH1cbiAgd2hpbGUoYm9hcmRzWzFdLmdldFNoaXBzUGxhY2VkKCkgPCA1KSB7XG4gICAgYm9hcmRzWzFdLnBsYWNlRGVzdHJveWVyKHBsYXllcnNbMV0uZ2VuZXJhdGVDb29yZGluYXRlKCksIHBsYXllcnNbMV0uZ2VuZXJhdGVCb29sZWFuKCkpO1xuICB9XG4gIGRpc3BsYXlDb21wdXRlckdhbWVib2FyZCgpO1xufSk7XG5cbmdhbWVPdmVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gIGZvcihsZXQgY2VsbCBvZiBjZWxscykge1xuICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGl0JywgJ21pc3MnLCAnc2hpcCcpO1xuICB9XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHNoaXBQbGFjZW1lbnRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gIGVuZW15TmFtZS5pbm5lclRleHQgPSAnVHlwZSBpbiB5b3VyIGNvb3JkaW5hdGVzIHRvIHBsYWNlIGEgc2hpcCc7XG4gIHBsYWNlU2hpcEhlYWRlci5pbm5lclRleHQgPSAnUGxhY2UgWW91ciBTaGlwcyc7XG4gIHNoaXBOYW1lLmlubmVyVGV4dCA9ICdDYXJyaWVyJztcblxuICBib2FyZHMubGVuZ3RoID0gMDtcbiAgcGxheWVycy5sZW5ndGggPSAwO1xuICBjcmVhdGVQbGF5ZXJzKCk7XG4gIGNyZWF0ZUJvYXJkcygpO1xuICBkaXNwbGF5Qm9hcmQoKTtcblxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYXllcnMoKSB7XG4gIGNvbnN0IGh1bWFuUGxheWVyID0gcGxheWVyKHRydWUpO1xuICBjb25zdCBjb21wdXRlclBsYXllciA9IHBsYXllcihmYWxzZSk7XG4gIHBsYXllcnMucHVzaChodW1hblBsYXllcik7XG4gIHBsYXllcnMucHVzaChjb21wdXRlclBsYXllcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJvYXJkcygpIHtcbiAgY29uc3QgcGxheWVyQm9hcmQgPSBnYW1lQm9hcmQoJ3BsYXllcicpO1xuICBjb25zdCBjb21wdXRlckJvYXJkID0gZ2FtZUJvYXJkKCdjb21wdXRlcicpO1xuICBib2FyZHMucHVzaChwbGF5ZXJCb2FyZCk7XG4gIGJvYXJkcy5wdXNoKGNvbXB1dGVyQm9hcmQpO1xufVxuXG5mdW5jdGlvbiBwbGFjZVNoaXAoKSB7XG4gIHN3aXRjaCAoYm9hcmRzWzBdLmdldFNoaXBzUGxhY2VkKCkpIHtcbiAgICBjYXNlIDA6XG4gICAgICBib2FyZHNbMF0ucGxhY2VDYXJyaWVyKHNoaXBQbGFjZW1lbnRJbnB1dC52YWx1ZSwgdmVydGljYWwsIHRydWUpO1xuICAgICAgdmVydGljYWwgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIGJvYXJkc1swXS5wbGFjZUJhdHRsZXNoaXAoc2hpcFBsYWNlbWVudElucHV0LnZhbHVlLCB2ZXJ0aWNhbCwgdHJ1ZSk7XG4gICAgICB2ZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgYm9hcmRzWzBdLnBsYWNlQ3J1aXNlcihzaGlwUGxhY2VtZW50SW5wdXQudmFsdWUsIHZlcnRpY2FsLCB0cnVlKTtcbiAgICAgIHZlcnRpY2FsID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBib2FyZHNbMF0ucGxhY2VTdWJtYXJpbmUoc2hpcFBsYWNlbWVudElucHV0LnZhbHVlLCB2ZXJ0aWNhbCwgdHJ1ZSk7XG4gICAgICB2ZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0OlxuICAgICAgYm9hcmRzWzBdLnBsYWNlRGVzdHJveWVyKHNoaXBQbGFjZW1lbnRJbnB1dC52YWx1ZSwgdmVydGljYWwsIHRydWUpO1xuICAgICAgdmVydGljYWwgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmV4cG9ydCB7IGJvYXJkcywgcGxheWVycyB9Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2hpcCIsIm5hbWUiLCJsZW5ndGgiLCJzdW5rIiwiaGl0cyIsImhpdCIsInNob3dIaXRzIiwiaXNTdW5rIiwibW9kYWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwid2lubmVyTmFtZURpc3BsYXkiLCJ0aXRsZUNvbnRhaW5lciIsImdhbWVDb250YWluZXIiLCJnYW1lSGVhZGVyIiwicGxheWVyTmFtZSIsImVuZW15TmFtZSIsIm5hbWVJbnB1dCIsInNoaXBQbGFjZW1lbnRDb250YWluZXIiLCJwbGFjZVNoaXBIZWFkZXIiLCJzaGlwTmFtZSIsInNoaXBQbGFjZW1lbnRJbnB1dCIsInBsYWNlU2hpcEJ0biIsInJvdGF0ZUJ0biIsInN0YXJ0Um91bmRCdG4iLCJjb21wdXRlckdhbWVib2FyZCIsImNvbXB1dGVyQ2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGlzcGxheUJvYXJkIiwic3R5bGUiLCJkaXNwbGF5IiwidmFsdWUiLCJpbm5lclRleHQiLCJjZWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvbWUiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInBsYXllcnMiLCJ0dXJuIiwiZmlyZSIsImRhdGFzZXQiLCJjb29yZGluYXRlcyIsImJvYXJkcyIsImNoZWNrQWxsU2hpcHNTdW5rIiwiZGlzcGxheUdhbWVPdmVyU2NyZWVuIiwibWFrZU1vdmUiLCJjb29yZHMiLCJib2FyZCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGQiLCJjaGVja0hpdCIsInJlY2VpdmVBdHRhY2siLCJ3aW5uZXIiLCJnYW1lQm9hcmQiLCJhMSIsImEyIiwiYTMiLCJhNCIsImE1IiwiYTYiLCJhNyIsImE4IiwiYjEiLCJiMiIsImIzIiwiYjQiLCJiNSIsImI2IiwiYjciLCJiOCIsImMxIiwiYzIiLCJjMyIsImM0IiwiYzUiLCJjNiIsImM3IiwiYzgiLCJkMSIsImQyIiwiZDMiLCJkNCIsImQ1IiwiZDYiLCJkNyIsImQ4IiwiZTEiLCJlMiIsImUzIiwiZTQiLCJlNSIsImU2IiwiZTciLCJlOCIsImYxIiwiZjIiLCJmMyIsImY0IiwiZjUiLCJmNiIsImY3IiwiZjgiLCJnMSIsImcyIiwiZzMiLCJnNCIsImc1IiwiZzYiLCJnNyIsImc4IiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2IiwiaDciLCJoOCIsInNoaXBOYW1lcyIsInNoaXBzIiwic2hpcHNQbGFjZWQiLCJwbGFjZVNoaXAiLCJzaGlwT2JqIiwic2hpcFN0cmluZyIsImxldHRlciIsIm51bSIsInZlcnRpY2FsIiwiRE9NIiwicGxhY2VDb29yZGluYXRlcyIsInNoaXBMZW5ndGgiLCJjb29yZE51bSIsImFyciIsImkiLCJwdXNoIiwiY2hlY2tDZWxsQXZhaWxhYmxpdHlIb3Jpem9udGFsIiwiY29vcmRpbmF0ZSIsInJlbW92ZSIsImNoYXJDb2RlQXQiLCJsZXR0ZXJDaGFyQ29kZSIsImNvb3JkTGV0dGVyIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hlY2tDZWxsQXZhaWxhYmxpdHlWZXJ0aWNhbCIsInBsYWNlQ2FycmllciIsImNhcnJpZXIiLCJzcGxpdCIsIk51bWJlciIsInRlc3QiLCJwbGFjZUJhdHRsZXNoaXAiLCJiYXR0bGVzaGlwIiwicGxhY2VDcnVpc2VyIiwiY3J1aXNlciIsInBsYWNlU3VibWFyaW5lIiwic3VibWFyaW5lIiwicGxhY2VEZXN0cm95ZXIiLCJkZXN0cm95ZXIiLCJjaGVja0NlbGxDb250YWluc1NoaXAiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsImdldFNoaXBzUGxhY2VkIiwicGxheWVyIiwibW92ZXNNYWRlIiwiZ2VuZXJhdGVDb29yZGluYXRlIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiZmxvb3IiLCJjb25jYXQiLCJnZW5lcmF0ZUJvb2xlYW4iLCJzdGFydEdhbWVCdG4iLCJnYW1lT3ZlckJ0biIsImNyZWF0ZVBsYXllcnMiLCJodW1hblBsYXllciIsImNvbXB1dGVyUGxheWVyIiwiY3JlYXRlQm9hcmRzIiwicGxheWVyQm9hcmQiLCJjb21wdXRlckJvYXJkIiwiZm9jdXMiLCJjZWxscyJdLCJzb3VyY2VSb290IjoiIn0=